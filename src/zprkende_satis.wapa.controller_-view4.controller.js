sap.ui.define(["sap/ui/core/mvc/Controller","sap/ui/model/json/JSONModel","sap/f/library","sap/m/MessageBox","sap/ui/core/Fragment","test/model/formatter","sap/m/MessageToast","sap/ui/model/resource/ResourceModel"],function(e,t,r,o,a,s,i,n){"use strict";+
let p;let l;let d=[];var u;let g;return e.extend("test.controller.View4",{onInit:function(){var e=this.getOwnerComponent().getModel("AddBasket");var t=e.getProperty("/sepet/sepet");if(t){t.forEach(function(e){e.DiscountedTutar=e.tutar;e.BirimDiscountedTu+
tar=e.Tutar})}else{this.getOwnerComponent().getRouter().navTo("RouteView1",{},true);this.onClearBasket()}var r=sap.ui.core.UIComponent.getRouterFor(this);r.getRoute("RouteView4").attachMatched(this._onRouteMatched,this);u=this.getOwnerComponent().getMode+
l("AddBasket")},formatCurrency:function(e){return s.formatCurrency(e)},_onRouteMatched:function(e){var t,r;t=e.getParameter("arguments");var o=t.param;if(o){u=this.getOwnerComponent().getModel("AddBasket")}else{}},currentChangeHandler:function(e){l=e.mPa+
rameters.value;var t=u.getProperty(e.getSource().getBindingContext("AddBasket").getPath()+"/Tutar");var r=e.getSource().getBindingContext("AddBasket").getPath();var o=l*parseFloat(t);var a=o.toFixed(3);var s=u.getProperty(e.getSource().getBindingContext(+
"AddBasket").getPath()+"/Kdv");var i=l*parseFloat(s);var n=i.toFixed(3);var p=u.getProperty(e.getSource().getBindingContext("AddBasket").getPath()+"/Price");var d=l*parseFloat(p);var c=d.toFixed(3);u.setProperty(r+"/tutar",a);u.setProperty(r+"/BirimTopla+
mTutar",a);u.setProperty(r+"/toplamKDV",n);u.setProperty(r+"/toplamKDVsizFiyat",c);u.setProperty(r+"/count",l);u.refresh();g=this.getView().getModel("AddBasket").getProperty("/sepet/sepet");var P=g.reduce((e,t)=>(parseFloat(e)+parseFloat(t.tutar)).toStri+
ng(),"0");var m=g.reduce((e,t)=>(parseFloat(e)+parseFloat(t.toplamKDVsizFiyat)).toString(),"0");var y=g.reduce((e,t)=>(parseFloat(e)+parseFloat(t.toplamKDV)).toString(),"0");u.setProperty("/ProductsTotalPrice",P);u.setProperty("/TotalPriceWithoutVAT",m);+
u.setProperty("/ProductsTotalVAT",y)},handleDelete:function(e){var t=e.getParameter("listItem");var r=this.getView().byId("idSepetTable");var o=r.getItems();if(o.length===1){this.onClearBasket()}else{var a=t.getBindingContext("AddBasket").getProperty("id+
");g=this.getView().getModel("AddBasket").getProperty("/sepet/sepet");g=g.filter(function(e){return e.id!==a});this.getView().getModel("AddBasket").setProperty("/sepet/sepet",g);u.refresh();this.calcTotal()}},calcTotal:function(){g=this.getView().getMode+
l("AddBasket").getProperty("/sepet/sepet");var e=g.length;var t=g.map(e=>({...e}));if(t){var r=t.reduce((e,t)=>(parseFloat(e)+parseFloat(t.tutar)).toString(),"0");var o=t.reduce((e,t)=>(parseFloat(e)+parseFloat(t.toplamKDVsizFiyat)).toString(),"0");var a+
=t.reduce((e,t)=>(parseFloat(e)+parseFloat(t.toplamKDV)).toString(),"0");u.setProperty("/ProductsTotalPrice",r);u.setProperty("/TotalPriceWithoutVAT",o);u.setProperty("/ProductsTotalVAT",a);u.setProperty("/ProductsArtNumber",e)}else{oModelSepet.setProper+
ty("/ProductsTotalPrice",0)}if(g.length===0){this.getOwnerComponent().getRouter().navTo("RouteView1",{},true);this.onClearBasket()}},goLogin:function(){this.getView().getModel("AddBasket").setProperty("/options",{Fiyat:"","YÃ¼zde":""});this.getOwnerCompo+
nent().getRouter().navTo("RouteView2")},goView1:function(){setTimeout(()=>{this.getOwnerComponent().getRouter().navTo("RouteView1",{param:"test"})},200)},onClearBasket:function(){var e=this.getOwnerComponent().getModel("AddBasket");e.setProperty("/odemeS+
ekli","Nakit");e.setProperty("/PaymentType","1");e.setProperty("/inputsVisible",false);e.setProperty("/step0",false);e.setProperty("/step1",false);e.setProperty("/step2",false);e.setProperty("/step3",false);e.setProperty("/updateEnable",false);e.setPrope+
rty("/createEnable",false);e.setProperty("/sepet/sepet",[]);e.setProperty("/ProductsTotalPrice",0);var t="Aliseris Sepeti Temizlendi";i.show(t);setTimeout(()=>{this.getOwnerComponent().getRouter().navTo("RouteView1",{param:"test"})},1e3)}})});            
//# sourceMappingURL=View4.controller.js.map                                                                                                                                                                                                                   