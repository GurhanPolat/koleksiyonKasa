sap.ui.define(["sap/ui/core/mvc/Controller","sap/ui/model/json/JSONModel","sap/f/library","sap/m/MessageBox","sap/m/MessageToast","sap/ui/core/Fragment","test/model/formatter","sap/ui/model/resource/ResourceModel"],function(e,t,r,s,i,a,o,n){"use strict";+
var d={prevPaymentSelect:null,prevDiffDeliverySelect:null};let l;let u;let g;var p;let h;let y;let c;let m;let f;return e.extend("test.controller.View3",{onInit:function(){this._wizard=this.byId("CreateProductWizard");this._oNavContainer=this.byId("wizar+
dNavContainer");this._oWizardContentPage=this.byId("wizardContentPage");var e=new t;e=this.getOwnerComponent().getModel("AddBasket");e.setProperty("/odemeSekli","Nakit");e.setProperty("/PaymentType","1");e.setProperty("/inputsVisible",false);e.setPropert+
y("/step0",false);e.setProperty("/step1",false);e.setProperty("/step2",false);e.setProperty("/step3",false);e.setProperty("/updateEnable",false);e.setProperty("/createEnable",false);e.setProperty("/buttonEnable",false);e.setProperty("/cancelButtonEnable"+
,true);e.setProperty("/TotalDisPercent","");e.setProperty("/indirimliOdenecekTutar","0");e.setProperty("/GercekKisi",false);e.setProperty("/UpdateKisi",true);e.setProperty("/Simkey","");e.setProperty("/shoppingCart",{});e.setProperty("/customerInfo",{});+
e.setProperty("/TeklifNo","");var r=new t;this.getView().setModel(r);this.siparisModel=this.getView().getModel();this.siparisModel.setProperty("/shoppingCart",{});this.siparisModel.setProperty("/customerInfo",{});this.model=new t;this.model.setData({prod+
uctNameState:"Error",productWeightState:"Error"});const s=new n({bundleName:"test.i18n.i18n"});this.getView().setModel(s,"i18n");var i=e.getProperty("/sepet/sepet");if(i){}else{this.getOwnerComponent().getRouter().navTo("RouteView1",{},true);this.onClear+
Basket()}},formatCurrency:function(e){return o.formatCurrency(e)},formatCurrencyWithoutTRY:function(e){return o.formatCurrencyWithoutTRY(e)},getBirimOrDiscountedTutar:function(e,t){return o.getBirimOrDiscountedTutar(e,t)},getDiscountedTutar:function(e,t)+
{return o.getDiscountedTutar(e,t)},getPage:function(){return this.byId("dynamicPage")},goMainMenu:function(){this._handleNavigationToStep(0);this.getOwnerComponent().getRouter().navTo("RouteView1")},confirmDiscount:function(){var e=this.getOwnerComponent+
().getModel("AddBasket");e.setProperty("/inputsVisible",true)},handleDiscountSubmit:async function(e){this.getView().setBusy(true);var t=this.getOwnerComponent().getModel("AddBasket");var r=t.getProperty("/sepet/sepet");var i=this.getView().byId("idSepet+
Table").getItems();var a=t.getProperty("/Salesman").MagazaKod;var o=t.getProperty("/PaymentType");var n=t.getProperty("/Salesman").PersonelNo;r.forEach(function(e){var t=e.id.toString();i.some(function(r){var s=r.getCells()[0].getText();if(t===s){var i=r+
.getCells()[5].getValue();e.discountPercent=i===null||i===""?"0":i;return true}return false})});var d=u.No;var l=t.getProperty("/Simkey");var g=t.getProperty("/TeklifNo");var p=this.getView().byId("idInputTotalDisPercent").getValue();p=p?p:"0";t.setPrope+
rty("/idInputTotalDisPercent",p);t.setProperty("/TotalDisPrice","0");var h=[];r.forEach(function(e,t){var r={Simkey:l,Kalem:((t+1)*10).toString(),ItemGuid:e.id.toString(),MalzemeNo:e.Metacode,Miktar:e.count.toString(),IskontoYuzde:e.discountPercent};h.pu+
sh(r)});var y={Simkey:l,MusteriNo:d,GenelIskontoYuzde:p,SonToplamTutar:"0",FiyatIskontoHeaderToItemNav:h,Bolge:a,SatisSorumlusu:n,OdemeTuru:o,TeklifNo:g};setTimeout(function(){this.getView().setBusy(false)}.bind(this),500);this.getView().setBusy(true);th+
is.getOwnerComponent().getModel().create("/FiyatIskontoHeaderSet",y,{success:function(e){var s=e.TeklifNo;r.forEach(function(t){var r=t.id.toString();e.FiyatIskontoHeaderToItemNav.results.forEach(function(e){var s=e.ItemGuid;if(r===s){t.DiscountedTutar=e+
.ToplamTutar;t.BirimDiscountedTutar=e.BirimIndirimTutar;t.GenelIskontoYuzde=e.GenelIskontoYuzde;t.FarkYuvarla=e.FarkYuvarla;t.BirimIndirimTutar=e.BirimIndirimTutar;t.tutar=e.ToplamTutar;t.BirimToplamTutar=parseFloat(t.Tutar)*parseInt(t.count)}})});this.g+
etView().setBusy(false);t.setProperty("/sepet/sepet",r);t.setProperty("/ProductsTotalPrice",e.ToplamTutar);t.setProperty("/TotalPriceWithoutVAT",e.NetTutar);t.setProperty("/ProductsTotalVAT",e.Kdv);t.setProperty("/ToplamIndirimTutar",e.ToplamIndirimTutar+
);t.setProperty("/FarkYuvarla",e.FarkYuvarla);t.setProperty("/TeklifNo",s);this.getView().setBusy(false)}.bind(this),error:function(e){this.getView().setBusy(false);var r=e.responseText;r=JSON.parse(e.responseText);r=r.error.innererror.errordetails[0].me+
ssage;t.setProperty("/ErrorOn",true);s.error("Error occurred: "+r)}.bind(this)});this.getView().setBusy(false)},currentChangeHandler:function(e){var t=this.getOwnerComponent().getModel("AddBasket");l=e.mParameters.value;var r=t.getProperty(e.getSource().+
getBindingContext("AddBasket").getPath()+"/BirimDiscountedTutar");if(r){this.getView().setBusy(true);this.handleDiscountSubmit();var s=t.getProperty(e.getSource().getBindingContext("AddBasket").getPath()+"BirimToplamTutar");var i=t.getProperty(e.getSourc+
e().getBindingContext("AddBasket").getPath()+"/Tutar");var a=e.getSource().getBindingContext("AddBasket").getPath();var o=l*parseFloat(i);var n=o.toFixed(3);t.setProperty(a+"/tutar",n);this.getView().setBusy(false)}else{var i=t.getProperty(e.getSource().+
getBindingContext("AddBasket").getPath()+"/Tutar");var a=e.getSource().getBindingContext("AddBasket").getPath();var o=l*parseFloat(i);var n=o.toFixed(3);var d=t.getProperty(e.getSource().getBindingContext("AddBasket").getPath()+"/Kdv");var u=l*parseFloat+
(d);var g=u.toFixed(3);var p=t.getProperty(e.getSource().getBindingContext("AddBasket").getPath()+"/Price");var h=l*parseFloat(p);var y=h.toFixed(3);t.setProperty(a+"/tutar",n);t.setProperty(a+"/BirimToplamTutar",n);t.setProperty(a+"/toplamKDV",g);t.setP+
roperty(a+"/toplamKDVsizFiyat",y);t.setProperty(a+"/count",l);t.refresh();let r=this.getView().getModel("AddBasket").getProperty("/sepet/sepet");var c=r.reduce((e,t)=>(parseFloat(e)+parseFloat(t.tutar)).toString(),"0");var m=r.reduce((e,t)=>(parseFloat(e+
)+parseFloat(t.toplamKDVsizFiyat)).toString(),"0");var f=r.reduce((e,t)=>(parseFloat(e)+parseFloat(t.toplamKDV)).toString(),"0");t.setProperty("/ProductsTotalPrice",c);t.setProperty("/TotalPriceWithoutVAT",m);t.setProperty("/ProductsTotalVAT",f)}},handle+
Delete:function(e){var t=this.getOwnerComponent().getModel("AddBasket");var r=e.getParameter("listItem");var s=this.getView().byId("idSepetTable");var i=s.getItems();if(i.length===1){this._handleNavigationToStep(0);this.onClearBasket()}else{var a=r.getBi+
ndingContext("AddBasket").getProperty("id");let e=this.getView().getModel("AddBasket").getProperty("/sepet/sepet");e=e.filter(function(e){return e.id!==a});this.getView().getModel("AddBasket").setProperty("/sepet/sepet",e);this.handleDiscountSubmit();t.r+
efresh()}},onCheckBoxChange:function(e){var t=this.getOwnerComponent().getModel("AddBasket");var r=e.getSource();var s=r.getText();if(s===this.getView().getModel("i18n").getResourceBundle().getText("gercekKisi")){t.setProperty("/GercekKisi",true)}else if+
(s===this.getView().getModel("i18n").getResourceBundle().getText("tuzelKisi")){t.setProperty("/GercekKisi",false)}},setProductType:function(e){var t=e.getSource().getTitle();this.model.setProperty("/productType",t);this.byId("ProductStepChosenType").setT+
ext("Chosen product type: "+t);this._wizard.validateStep(this.byId("ProductTypeStep"))},setProductTypeFromSegmented:function(e){var t=e.getParameters().item.getText();this.model.setProperty("/productType",t);this._wizard.validateStep(this.byId("ProductTy+
peStep"))},onSuggest:function(){},additionalInfoValidation:function(){},optionalStepActivation:function(){y=this.getOwnerComponent().getModel("AddBasket").getProperty("/Salesman").BolgeAdi;c=this.getOwnerComponent().getModel("AddBasket").getProperty("/Sa+
lesman").PersonelName;m=this.getOwnerComponent().getModel("AddBasket").getProperty("/Salesman").MagazaKod;f=this.getOwnerComponent().getModel("AddBasket").getProperty("/Salesman").PersonelNo;this.getView().byId("idSalesmanInput").setValue(c);this.getView+
().byId("idMagazaKodu").setValue(y);this.getOwnerComponent().getModel().read("/HeaderBolgeSet('"+m+"')/BolgeToSatSor",{success:function(e){g=e.results;this.siparisModel.setProperty("/salesmanInfo",g);this.getOwnerComponent().getModel("AddBasket").setProp+
erty("/SalesmanInfo",g)}.bind(this),error:function(e){s.error("Error occurred: "+e.responseText)}})},selectSalesman:function(e){var t=e.getParameter("selectedItem");if(t){var r=t.getBindingContext("AddBasket").getProperty("Vorna");var s=t.getBindingConte+
xt("AddBasket").getProperty("Nachn");var i=t.getBindingContext("AddBasket").getProperty("Pernr");var a=t.getBindingContext("AddBasket").getProperty("Kdgrp");var o=r+" "+s;var n={PersonelName:o,PersonelNo:i,MagazaKod:a}}this.getOwnerComponent().getModel("+
AddBasket").setProperty("/Salesman",n)},pricingActivate:function(){this.model.setProperty("/navApiEnabled",true)},pricingComplete:function(){this.model.setProperty("/navApiEnabled",false)},scrollFrom4to2:function(){this._wizard.goToStep(this.byId("Produc+
tInfoStep"))},goFrom4to3:function(){if(this._wizard.getProgressStep()===this.byId("PricingStep")){this._wizard.previousStep()}},goFrom4to5:function(){if(this._wizard.getProgressStep()===this.byId("PricingStep")){this._wizard.nextStep()}},wizardCompletedH+
andler:function(){this._oNavContainer.to(this.byId("wizardReviewPage"))},backToWizardContent:function(){this._oNavContainer.backToPage(this._oWizardContentPage.getId())},editStepOne:function(){this._handleNavigationToStep(0)},editStepTwo:function(){this.+
_handleNavigationToStep(1)},editStepThree:function(){this._handleNavigationToStep(2)},editStepFour:function(){this._handleNavigationToStep(3)},_handleNavigationToStep:function(e){var t=function(){this._wizard.goToStep(this._wizard.getSteps()[e]);this._oN+
avContainer.detachAfterNavigate(t)}.bind(this);this._oNavContainer.attachAfterNavigate(t);this.backToWizardContent()},_handleMessageBoxOpen:function(e,t){s[t](e,{actions:[s.Action.YES,s.Action.NO],onClose:function(e){if(e===s.Action.YES){this.siparisCrea+
te()}}.bind(this)})},_handleMessageBoxOpenCancel:function(e,t){s[t](e,{actions:[s.Action.YES,s.Action.NO],onClose:function(e){if(e===s.Action.YES){var t=this.getOwnerComponent().getModel("AddBasket");t.setProperty("/buttonEnable",false);t.setProperty("/c+
ancelButtonEnable",true);this.onClearBasket()}}.bind(this)})},_setEmptyValue:function(e){this.model.setProperty(e,"n/a")},onClearBasket:function(){var e=this.getOwnerComponent().getModel("AddBasket");e.setProperty("/inputsVisible",false);e.setProperty("/+
step0",false);e.setProperty("/step1",false);e.setProperty("/step2",false);e.setProperty("/step3",false);e.setProperty("/updateEnable",false);e.setProperty("/createEnable",false);u=undefined;e.setProperty("/sepet/sepet",[]);e.setProperty("/customerInfo",{+
});e.setProperty("/salesmanInfo",{});e.setProperty("/basket",[]);this.getView().byId("idMusteriName").setText("");this.getView().byId("idMusteriTel").setText("");this.getView().byId("idMusteriOrt").setText("");this.getView().byId("idMusteriEmail").setTex+
t("");this.getView().byId("idMusteriNo").setText("");this.getView().byId("idSearchName").setValue("");this.getView().byId("idSearchTc").setValue("");this.getView().byId("idSearchTel").setValue("");e.setProperty("/ToplamIndirimTutar","");this.getView().by+
Id("idInputTotalDisPercent").setValue("");this.getView().byId("idInputDisPercent").setValue("");this._handleNavigationToStep(0);this._wizard.discardProgress(this._wizard.getSteps()[0]);var t=this.getMessageFromi18n("chartCleared");sap.m.MessageToast.show+
(t);setTimeout(()=>{this.getOwnerComponent().getRouter().navTo("RouteView1",{param:"test"})},1e3)},onClearCustomer:function(){var e=this.getOwnerComponent().getModel("AddBasket");this.getView().byId("idMusteriName").setText("");this.getView().byId("idMus+
teriTel").setText("");this.getView().byId("idMusteriOrt").setText("");this.getView().byId("idMusteriEmail").setText("");this.getView().byId("idMusteriNo").setText("");this.getView().byId("idSearchName").setValue("");this.getView().byId("idSearchTc").setV+
alue("");this.getView().byId("idSearchTel").setValue("");e.setProperty("/updateEnable",false);e.setProperty("/createEnable",true);e.setProperty("/step0",false);e.setProperty("/step1",false);e.setProperty("/step2",false);e.setProperty("/step3",false);e.se+
tProperty("/customerInfo",{});e.setProperty("/GercekKisi",false);u=undefined;this.fragmentInputClean()},musteriAra:function(){var e;this.getView().setBusy(true);var t=this.getView().byId("idSearchName").getValue().toLowerCase();var r=this.getView().byId(+
"idSearchTc").getValue().toLowerCase();var i=this.getView().byId("idSearchTel").getValue().toLowerCase();if(t.length>4||r.length>4||i.length>4){this.getOwnerComponent().getModel().read("/MusteriHeaderSet(TcVergino='"+r+"',Adi='"+t+"',Telefon='"+i+"')/Mus+
teriHeaderToItemNav",{success:function(t){e=t.results;this.getOwnerComponent().getModel("MusteriSet").setProperty("/",{musteriArray:e});this.getView().setBusy(false);this.fragmentLaden()}.bind(this),error:function(e){s.error("Error occurred: "+e.response+
Text)}});this.getView().setBusy(false)}this.getView().setBusy(false)},onSearchChange:function(e){var t;var r="";var i="";var a="";var o=e.getParameter("id").split("--").pop();var n=this.getView().byId(o).getValue().toLowerCase();switch(o){case"idSearchTe+
l":i=n!==""?n:"";break;case"idSearchTc":r=n!==""?n:"";break;case"idSearchName":a=n!==""?n:"";break;default:break}if(n.length>4){this.getView().setBusy(true);this.getOwnerComponent().getModel().read("/MusteriHeaderSet(TcVergino='"+r+"',Adi='"+a+"',Telefon+
='"+i+"')/MusteriHeaderToItemNav",{success:function(e){t=e.results;this.getOwnerComponent().getModel("MusteriSet").setProperty("/",{musteriArray:t});this.getView().setBusy(false);this.getView().byId("idSearchName").setValue("");this.getView().byId("idSea+
rchTc").setValue("");this.getView().byId("idSearchTel").setValue("");this.fragmentLaden()}.bind(this),error:function(e){s.error("Error occurred: "+e.responseText);this.getView().setBusy(false)}});this.getView().setBusy(false)}},fragmentLaden:async functi+
on(){this.oDialog??=await this.loadFragment({name:"test.fragments.musteri"});var e=this.getView().getModel("MusteriSet");this.oDialog.setModel(e,"MusteriSet");this.oDialog.bindElement({path:"/"});this.oDialog.open()},onCloseButtonPress:function(){var e=t+
his.getOwnerComponent().getModel("AddBasket");if(typeof u==="undefined"){s.information(this.getMessageFromi18n("plsCreateaCustomer"));e.setProperty("/updateEnable",false);e.setProperty("/createEnable",true);this.oDialog.close()}else{e.setProperty("/updat+
eEnable",true);e.setProperty("/createEnable",false);this._wizard.setCurrentStep(this.byId("ProductInfoStep"));this._wizard.validateStep(this.byId("ProductInfoStep"));this.oDialog.close()}},onCloseMusteriButtonPress:function(){var e=this.getOwnerComponent+
().getModel("AddBasket");if(typeof u==="undefined"){s.information(this.getMessageFromi18n("plsCreateaCustomer"));e.setProperty("/updateEnable",false);e.setProperty("/createEnable",true);this.fragmentInputClean();this.musteriCreateDialog.close()}else{this+
.musteriCreateDialog.close()}},handleCreateClient:async function(){var e=this.getOwnerComponent().getModel("AddBasket");e.setProperty("/UpdateKisi",true);this.musteriCreateDialog??=await this.loadFragment({name:"test.fragments.musteriCreate"});var t=this+
.musteriCreateDialog.getButtons()[0];t.setText(this.getMessageFromi18n("createCustomerText"));this.musteriCreateDialog.open()},handleUpdateClient:async function(){var e=this.getOwnerComponent().getModel("AddBasket");e.setProperty("/UpdateKisi",false);var+
 t="";var r="";var i=u.No;this.getOwnerComponent().getModel().read("/MusteriHeaderSet(TcVergino='"+t+"',Adi='"+i+"',Telefon='"+r+"')",{success:function(e){this.getView().setBusy(true);var t=e;this.getView().byId("nameInputfr").setValue(t.Adi);this.getVie+
w().byId("name2Inputfr").setValue(t.Soyadi);this.getView().byId("ortInputfr").setValue(t.Il);this.getView().byId("ort2Inputfr").setValue(t.Ilce);this.getView().byId("pstlzInputfr").setValue(t.PostaKodu);this.getView().byId("sokakNofr").setValue(t.No);thi+
s.getView().byId("telfInputfr").setValue(t.Telefon);this.getView().byId("strasInputfr").setValue(t.Sokak);this.getView().byId("mahalleInputfr").setValue(t.Mahalle);this.getView().byId("emailInputfr").setValue(t.Email);var r=t.Adi+" "+t.Soyadi;t.Name=r;va+
r s=t.Mahalle+" "+t.Sokak+" "+t.No+" "+t.Ilce+" "+t.Il;t.Adres=s;this.getOwnerComponent().getModel("AddBasket").setProperty("/customerInfo",t);this._wizard.validateStep(this.byId("ProductInfoStep"));this.getView().setBusy(false)}.bind(this),error:functio+
n(e){s.error("Error occurred: "+e.responseText)}});this.musteriCreateDialog??=await this.loadFragment({name:"test.fragments.musteriCreate"});var a=this.musteriCreateDialog.getButtons()[0];a.setText(this.getMessageFromi18n("updateCustomerText"));this.getV+
iew().setBusy(false);this.musteriCreateDialog.open()},musteriEklePress:function(){this._wizard.validateStep(this.byId("ProductInfoStep"));this._wizard.setCurrentStep(this.byId("ProductInfoStep"));var e=this.getOwnerComponent().getModel("AddBasket");if(u)+
{e.setProperty("/customerInfo",u);e.setProperty("/updateEnable",true);e.setProperty("/createEnable",false);this.getView().byId("idMusteriName").setText(u.Adi);this.getView().byId("idMusteriTel").setText(u.Telefon);this.getView().byId("idMusteriOrt").setT+
ext(u.Adres);this.getView().byId("idMusteriEmail").setText(u.Email);this.getView().byId("idMusteriNo").setText(u.No);this._wizard.validateStep(this.byId("ProductInfoStep"))}else{e.setProperty("/updateEnable",false);e.setProperty("/createEnable",true)}thi+
s.onCloseButtonPress()},musteriOlusturPress:function(){var e=this.getOwnerComponent().getModel("AddBasket");var t=new Date;var r=t.toISOString().replace(/[-T:.Z]/g,"");e.setProperty("/allfine",true);var i=this.getView().byId("nameInputfr").getValue();var+
 a=this.getView().byId("name2Inputfr").getValue();var o=this.getView().byId("ortInputfr").getValue();var n=this.getView().byId("ort2Inputfr").getValue();var d=this.getView().byId("pstlzInputfr").getValue();var l=this.getView().byId("strasInputfr").getVal+
ue();var g=this.getView().byId("mahalleInputfr").getValue();var h=this.getView().byId("sokakNofr").getValue();var y=this.getView().byId("telfInputfr").getValue();var c=this.getView().byId("emailInputfr").getValue();var m=e.getProperty("/GercekKisi");this+
.getView().setBusy(true);this.onValidateEmail();this.onValidateCity();this.onValidatePost();this.onValidateName();this.onValidateLastName();this.getView().setBusy(false);var f=e.getProperty("/allfine");if(f===true){var P=this.musteriCreateDialog.getButto+
ns()[0];if(P.getText()===this.getMessageFromi18n("updateCustomerText")){e.setProperty("/UpdateKisi",false);var V={MusteriNo:u.No,Adi:i,Soyadi:a,Il:o,Ilce:n,PostaKodu:d,Sokak:l,Mahalle:g,No:h,Telefon:y,Email:c};this.getOwnerComponent().getModel().create("+
/MusteriHeaderSet",V,{success:function(e){s.success(this.getMessageFromi18n("messageCustomerUpdatedsuccess"));this.fragmentInputClean();this.musteriCreateDialog.close();this.getView().byId("idMusteriName").setText(V.Adi+" "+V.Soyadi);this.getView().byId(+
"idMusteriTel").setText(V.Telefon);this.getView().byId("idMusteriOrt").setText(V.Mahalle+" "+V.Sokak+" "+V.No+" "+V.Ilce+" "+V.Il);this.getView().byId("idMusteriEmail").setText(V.Email);this.getView().byId(" musteri.No").setText(u.No);this._wizard.valida+
teStep(this.byId("ProductInfoStep"))}.bind(this),error:function(e){s.error("Error occurred: "+e.responseText)}})}else{e.setProperty("/UpdateKisi",true);p={GercekKisi:m,Adi:i,Soyadi:a,Il:o,Ilce:n,PostaKodu:d,Sokak:l,Mahalle:g,No:h,Telefon:y,Email:c};this.+
getOwnerComponent().getModel().create("/MusteriHeaderSet",p,{success:function(i){u=i;u.No=i.MusteriNo;var a=u.No+r;var o=u.No+"_"+t;e.setProperty("/Simkey",a);e.setProperty("/Simkey2",o);this.getView().byId("idMusteriName").setText(p.Adi+" "+p.Soyadi);th+
is.getView().byId("idMusteriTel").setText(p.Telefon);this.getView().byId("idMusteriOrt").setText(p.Il+" "+p.Ilce+" "+p.Mahalle+" "+p.Sokak+" "+p.No);this.getView().byId("idMusteriEmail").setText(p.Email);this.getView().byId("idMusteriNo").setText(u.No);v+
ar n=u.Adi+" "+u.Soyadi;u.Name=n;var d=u.Mahalle+" "+u.Sokak+" "+u.No+" "+u.Ilce+" "+u.Il;u.Adres=d;e.setProperty("/customerInfo",u);e.setProperty("/updateEnable",true);e.setProperty("/createEnable",false);s.success(this.getMessageFromi18n("messageCustom+
erCreatedsuccess"));this.fragmentInputClean();this.musteriCreateDialog.close();this._wizard.validateStep(this.byId("ProductInfoStep"))}.bind(this)})}}else{}},fragmentInputClean:function(){var e=this.getOwnerComponent().getModel("AddBasket");e.setProperty+
("/GercekKisi",false);this.getView().byId("nameInputfr").setValue("");this.getView().byId("name2Inputfr").setValue("");this.getView().byId("ortInputfr").setValue("");this.getView().byId("ort2Inputfr").setValue("");this.getView().byId("pstlzInputfr").setV+
alue("");this.getView().byId("strasInputfr").setValue("");this.getView().byId("mahalleInputfr").setValue("");this.getView().byId("sokakNofr").setValue("");this.getView().byId("telfInputfr").setValue("");this.getView().byId("emailInputfr").setValue("")},o+
nValidateEmail:function(){var e=this.getOwnerComponent().getModel("AddBasket");var t=e.getProperty("/allfine");var r=this.getView().byId("emailInputfr").getValue();if(r===""){e.setProperty("/allfine",false);t=false;this.getView().byId("emailInputfr").set+
ValueState("Error");this.getView().byId("emailInputfr").setValueStateText(this.getMessageFromi18n("mandatoryFieldEmail"));s.error(this.getMessageFromi18n("mandatoryFieldEmail"))}else{this.getView().byId("emailInputfr").setValueState("None");var i=/^(([^<+
>()[\]\\.,;:\s@\"]+(\.[^<>()[\]\\.,;:\s@\"]+)*)|(\".+\"))@(([^<>()[\]\\.,;:\s@\"]+\.)+[^<>()[\]\\.,;:\s@\"]{2,})$/i;if(!r.match(i)){this.getView().byId("emailInputfr").setValueState("Error");this.getView().byId("emailInputfr").setValueStateText(this.getM+
essageFromi18n("emailStandardMessage"));s.error(this.getMessageFromi18n("emailStandardMessage"));e.setProperty("/allfine",false);t=false}}},onValidateCity:function(){var e=this.getView().byId("ortInputfr").getValue();var t=this.getOwnerComponent().getMod+
el("AddBasket");if(e===""){t.setProperty("/allfine",false);this.getView().byId("ortInputfr").setValueState("Error");this.getView().byId("ortInputfr").setValueStateText(this.getMessageFromi18n("mandatoryFieldCity"))}else{this.getView().byId("ortInputfr").+
setValueState("None")}},onValidateName:function(){var e=this.getView().byId("nameInputfr").getValue();var t=this.getOwnerComponent().getModel("AddBasket");if(e===""){t.setProperty("/allfine",false);this.getView().byId("nameInputfr").setValueState("Error"+
);this.getView().byId("nameInputfr").setValueStateText(this.getMessageFromi18n("mandatoryFieldCity"))}else{this.getView().byId("nameInputfr").setValueState("None")}},onValidateLastName:function(){var e=this.getView().byId("name2Inputfr").getValue();var t+
=this.getOwnerComponent().getModel("AddBasket");if(e===""){t.setProperty("/allfine",false);this.getView().byId("name2Inputfr").setValueState("Error");this.getView().byId("name2Inputfr").setValueStateText(this.getMessageFromi18n("mandatoryFieldCity"))}els+
e{this.getView().byId("name2Inputfr").setValueState("None")}},onValidatePost:function(){var e=this.getView().byId("pstlzInputfr").getValue();var t=this.getOwnerComponent().getModel("AddBasket");var r=/^\d{5}$/;if(e===""){t.setProperty("/allfine",false);t+
his.getView().byId("pstlzInputfr").setValueState("Error");this.getView().byId("pstlzInputfr").setValueStateText(this.getMessageFromi18n("mandatoryFieldPostcode"))}else if(!e.match(r)){t.setProperty("/allfine",false);this.getView().byId("pstlzInputfr").se+
tValueState("Error");this.getView().byId("pstlzInputfr").setValueStateText(this.getMessageFromi18n("invalidPostcodeMessage"))}else{this.getView().byId("pstlzInputfr").setValueState("None")}},musteriTableSelectionChange:function(e){var t=this.getOwnerComp+
onent().getModel("AddBasket");var r=this.oView.byId("tab2");var s=r.getSelectedItems();var i=new Date;var a="SIPKEY_"+i.getTime();u={No:s[0].mAggregations.cells[0].mProperties.text,Adi:s[0].mAggregations.cells[1].mProperties.text,Telefon:s[0].mAggregatio+
ns.cells[2].mProperties.text,Adres:s[0].mAggregations.cells[3].mProperties.text,Email:s[0].mAggregations.cells[4].mProperties.text,Sipkey:a};var i=new Date;var o=u.No+i.getTime();var n=u.No+"_"+i.getTime();t.setProperty("/Simkey",o);t.setProperty("/Simke+
y2",n);this.musteriEklePress();r.removeSelections(true)},odemeSekli:function(e){var t=e.getParameter("selectedIndex");var r;if(t!==undefined&&t!==null){var s=this.byId("idPaymentMethod");var i=s.getButtons()[t];r=i.getId().split("--").pop()}switch(r){cas+
e"creditCard":var a=this.getMessageFromi18n("krediKarti");this.getOwnerComponent().getModel("AddBasket").setProperty("/odemeSekli",a);this.getOwnerComponent().getModel("AddBasket").setProperty("/PaymentType","2");this.handleDiscountSubmit();break;case"ca+
sh":var o=this.getMessageFromi18n("nakit");this.getOwnerComponent().getModel("AddBasket").setProperty("/odemeSekli",o);this.getOwnerComponent().getModel("AddBasket").setProperty("/PaymentType","1");this.handleDiscountSubmit();break;default:break}},handle+
WizardCancel:function(){var e=this.getMessageFromi18n("messageCleanText");this._handleMessageBoxOpenCancel(e,"warning")},handleWizardSubmit:function(){var e=this.getMessageFromi18n("messageConfirmText");this._handleMessageBoxOpen(e,"confirm")},handleWiza+
rdPrint:async function(){var e;var t=this.getOwnerComponent().getModel("AddBasket");var r=t.getProperty("/vbeln");var s=t.getProperty("/Env");var i=false;if(s==="DEV"){e="http://kolerpt.koleksiyon.mobilya:8000/sap/opu/odata/sap/ZSD_ODATA_KASA_SRV/SalesDo+
cumentPdfSet(PdfKey='"+r+"',Teklif='"+i+"')/$value"}else if(s==="TEST"){e="http://kolerpqa:8000/sap/opu/odata/sap/ZSD_ODATA_KASA_SRV/SalesDocumentPdfSet(PdfKey='"+r+"',Teklif='"+i+"')/$value"}else{console.log("Unknown Environment")}window.open(e)},handle+
WizardOfferPrint:async function(){var e=this.getOwnerComponent().getModel("AddBasket");await this.handleDiscountSubmit();await new Promise(e=>setTimeout(e,1e3));this.getView().setBusy(false);var t;var r=true;var s=e.getProperty("/TeklifNo");if(!s){consol+
e.error("Teklif numarasÄ± oluÅturulamadÄ±.");return}var i=e.getProperty("/Env");if(i=="DEV"){t="http://kolerpt.koleksiyon.mobilya:8000/sap/opu/odata/sap/ZSD_ODATA_KASA_SRV/SalesDocumentPdfSet(PdfKey='"+s+"',Teklif='"+r+"')/$value"}else if(i=="TEST"){t="+
http://kolerpqa:8000/sap/opu/odata/sap/ZSD_ODATA_KASA_SRV/SalesDocumentPdfSet(PdfKey='"+s+"',Teklif='"+r+"')/$value"}else{console.log("Unknown Environment")}this.getView().setBusy(true);setTimeout(function(){var r=e.getProperty("/ErrorOn");if(r!==true){w+
indow.open(t)}}.bind(this),2e3);this.getView().setBusy(false)},handleWizardBack:function(){this.editStepOne()},handleWizardShop:function(){this.editStepOne();setTimeout(()=>{this.getOwnerComponent().getRouter().navTo("RouteView1",{param:"test"})},500)},s+
iparisCreate:function(){this.getView().setBusy(true);var e=this.getOwnerComponent().getModel("AddBasket");var t=e.getProperty("/sepet/sepet");var r=e.getProperty("/TotalDisPercent")||"0";var i=e.getProperty("/Salesman").MagazaKod;var a=e.getProperty("/Sa+
lesman").PersonelNo;var o=u.No;var n=[];var d=e.getProperty("/PaymentType");var l=this.getMessageFromi18n("poSuccessText");t.forEach(function(e,t){var r={Sipkey:u.Sipkey,Kalem:((t+1)*10).toString(),MalzemeNo:e.Metacode,Miktar:e.count.toString(),IskontoYu+
zde:e.discountPercent,IskontoTutar:"0",ParaBirimi:"TRY",VergiId:"1"};n.push(r)});var g={Sipkey:u.Sipkey,MusteriNo:o,GenelIskontoYuzde:r,GenelIskontoTutar:"0",OdemeTuru:d,SonToplamTutar:"0",Bolge:i,SatisSorumlusu:a,Vbeln:"",SalesHeaderToItemNav_v2:n};this+
.getOwnerComponent().getModel().create("/SalesCreateHeader_v2Set",g,{success:function(t){this.getView().setBusy(true);var r=t.Vbeln;setTimeout(function(){s.success(t.Vbeln+" "+l);e.setProperty("/vbeln",r);e.setProperty("/buttonEnable",true);e.setProperty+
("/cancelButtonEnable",false);this.getView().setBusy(false)}.bind(this),2500)}.bind(this),error:function(e){var t=e.responseText;t=JSON.parse(e.responseText);t=t.error.innererror.errordetails[0].message;s.error("Error occurred: "+t)}})},productWeighState+
Formatter:function(e){return isNaN(e)?"Error":"None"},discardProgress:function(){this._wizard.discardProgress(this.byId("ProductTypeStep"));var e=function(t){for(var r=0;r<t.length;r++){if(t[r].setValue){t[r].setValue("")}if(t[r].getContent){e(t[r].getCo+
ntent())}}};this.model.setProperty("/productWeightState","Error");this.model.setProperty("/productNameState","Error");e(this._wizard.getSteps())},getMessageFromi18n:function(e){const t=this.getView().getModel("i18n").getResourceBundle();var r=t.getText(e+
);return r}})});                                                                                                                                                                                                                                               
//# sourceMappingURL=View3.controller.js.map                                                                                                                                                                                                                   