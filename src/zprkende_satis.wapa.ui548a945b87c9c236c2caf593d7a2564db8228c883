sap.ui.define(                                                                                                                                                                                                                                                 
  [                                                                                                                                                                                                                                                            
    "sap/ui/core/mvc/Controller",                                                                                                                                                                                                                              
    "sap/ui/model/json/JSONModel",                                                                                                                                                                                                                             
    "sap/f/library",                                                                                                                                                                                                                                           
    "sap/m/MessageBox",                                                                                                                                                                                                                                        
    "sap/m/MessageToast",                                                                                                                                                                                                                                      
    "sap/ui/core/Fragment",                                                                                                                                                                                                                                    
    "test/model/formatter",                                                                                                                                                                                                                                    
    "sap/ui/model/resource/ResourceModel",                                                                                                                                                                                                                     
  ],                                                                                                                                                                                                                                                           
  function (                                                                                                                                                                                                                                                   
    Controller,                                                                                                                                                                                                                                                
    JSONModel,                                                                                                                                                                                                                                                 
    library,                                                                                                                                                                                                                                                   
    MessageBox,                                                                                                                                                                                                                                                
    Fragment,                                                                                                                                                                                                                                                  
    MessageToast,                                                                                                                                                                                                                                              
    formatter,                                                                                                                                                                                                                                                 
    ResourceModel                                                                                                                                                                                                                                              
  ) {                                                                                                                                                                                                                                                          
    "use strict";                                                                                                                                                                                                                                              
    var history = {                                                                                                                                                                                                                                            
      prevPaymentSelect: null,                                                                                                                                                                                                                                 
      prevDiffDeliverySelect: null,                                                                                                                                                                                                                            
    };                                                                                                                                                                                                                                                         
    let adet;                                                                                                                                                                                                                                                  
    let musteri;                                                                                                                                                                                                                                               
    let saticilar;                                                                                                                                                                                                                                             
    var yeniMusteri;                                                                                                                                                                                                                                           
    let discountOran;                                                                                                                                                                                                                                          
    let bolgeAdi;                                                                                                                                                                                                                                              
    let personelAdi;                                                                                                                                                                                                                                           
    let magazaKodu;                                                                                                                                                                                                                                            
    let personelKodu;                                                                                                                                                                                                                                          
&nbsp;&nbsp;&nbsp;&nbsp;                                                                                                                                                                                                                                       
    // AddBasket>/salesmanInfo                                                                                                                                                                                                                                 
    return Controller.extend("test.controller.View3", {                                                                                                                                                                                                        
      onInit: function () {                                                                                                                                                                                                                                    
        this._wizard = this.byId("CreateProductWizard");                                                                                                                                                                                                       
        this._oNavContainer = this.byId("wizardNavContainer");                                                                                                                                                                                                 
        this._oWizardContentPage = this.byId("wizardContentPage");                                                                                                                                                                                             
                                                                                                                                                                                                                                                               
        var oModelSepet = new JSONModel();                                                                                                                                                                                                                     
        oModelSepet = this.getOwnerComponent().getModel("AddBasket");                                                                                                                                                                                          
                                                                                                                                                                                                                                                               
        oModelSepet.setProperty("/odemeSekli", "Nakit");                                                                                                                                                                                                       
        oModelSepet.setProperty("/PaymentType", "1");                                                                                                                                                                                                          
        oModelSepet.setProperty("/inputsVisible", false);                                                                                                                                                                                                      
        oModelSepet.setProperty("/step0", false);                                                                                                                                                                                                              
        oModelSepet.setProperty("/step1", false);                                                                                                                                                                                                              
        oModelSepet.setProperty("/step2", false);                                                                                                                                                                                                              
        oModelSepet.setProperty("/step3", false);                                                                                                                                                                                                              
        oModelSepet.setProperty("/updateEnable", false);                                                                                                                                                                                                       
        oModelSepet.setProperty("/createEnable", false);                                                                                                                                                                                                       
        oModelSepet.setProperty("/buttonEnable", false);                                                                                                                                                                                                       
        oModelSepet.setProperty("/cancelButtonEnable", true);                                                                                                                                                                                                  
        oModelSepet.setProperty("/TotalDisPercent", "");                                                                                                                                                                                                       
        oModelSepet.setProperty("/indirimliOdenecekTutar", "0");                                                                                                                                                                                               
        oModelSepet.setProperty("/GercekKisi", false);                                                                                                                                                                                                         
        oModelSepet.setProperty("/UpdateKisi", true);                                                                                                                                                                                                          
        oModelSepet.setProperty("/Simkey", "");                                                                                                                                                                                                                
        oModelSepet.setProperty("/shoppingCart", {});                                                                                                                                                                                                          
        oModelSepet.setProperty("/customerInfo", {});                                                                                                                                                                                                          
        oModelSepet.setProperty("/TeklifNo", "");                                                                                                                                                                                                              
                                                                                                                                                                                                                                                               
        var siparisModel = new JSONModel();                                                                                                                                                                                                                    
        this.getView().setModel(siparisModel);                                                                                                                                                                                                                 
        this.siparisModel = this.getView().getModel();                                                                                                                                                                                                         
        this.siparisModel.setProperty("/shoppingCart", {});                                                                                                                                                                                                    
        this.siparisModel.setProperty("/customerInfo", {});                                                                                                                                                                                                    
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;                                                                                                                                                                                                                           
        this.model = new JSONModel();                                                                                                                                                                                                                          
        this.model.setData({                                                                                                                                                                                                                                   
          productNameState: "Error",                                                                                                                                                                                                                           
          productWeightState: "Error",                                                                                                                                                                                                                         
          });                                                                                                                                                                                                                                                  
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;                                                                                                                                                                                                   
          // set i18n model on view       test.i18n.i18n                                                                                                                                                                                                       
        const i18nModel = new ResourceModel({                                                                                                                                                                                                                  
          bundleName: "test.i18n.i18n",                                                                                                                                                                                                                        
          });                                                                                                                                                                                                                                                  
          this.getView().setModel(i18nModel, "i18n");                                                                                                                                                                                                          
        var sepettekiUrunler = oModelSepet.getProperty("/sepet/sepet");                                                                                                                                                                                        
        if (sepettekiUrunler) {                                                                                                                                                                                                                                
          // sepettekiUrunler.forEach(function (item) {                                                                                                                                                                                                        
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;                                                                                                                                                                                                         
          //   item.DiscountedTutar = item.tutar;                                                                                                                                                                                                              
          //   item.BirimDiscountedTutar = item.Tutar;                                                                                                                                                                                                         
          // });                                                                                                                                                                                                                                               
        } else {                                                                                                                                                                                                                                               
          // If the basket is empty, navigate to "view1" and reset everything                                                                                                                                                                                  
          this.getOwnerComponent().getRouter().navTo("RouteView1", {}, true);                                                                                                                                                                                  
          this.onClearBasket();                                                                                                                                                                                                                                
        }                                                                                                                                                                                                                                                      
          },                                                                                                                                                                                                                                                   
                                                                                                                                                                                                                                                               
      //! Formatter'Ä± kullanarak para birimini biÃ§imleme iÅlevi                                                                                                                                                                                             
      formatCurrency: function (amount) {                                                                                                                                                                                                                      
        return formatter.formatCurrency(amount);                                                                                                                                                                                                               
      },                                                                                                                                                                                                                                                       
      formatCurrencyWithoutTRY: function (amount) {                                                                                                                                                                                                            
        return formatter.formatCurrencyWithoutTRY(amount);                                                                                                                                                                                                     
      },                                                                                                                                                                                                                                                       
      getBirimOrDiscountedTutar: function (amount1, amount2) {                                                                                                                                                                                                 
        return formatter.getBirimOrDiscountedTutar(amount1, amount2);                                                                                                                                                                                          
      },                                                                                                                                                                                                                                                       
      getDiscountedTutar: function (amount1, amount2) {                                                                                                                                                                                                        
        return formatter.getDiscountedTutar(amount1, amount2);                                                                                                                                                                                                 
      },                                                                                                                                                                                                                                                       
      getPage: function () {                                                                                                                                                                                                                                   
        return this.byId("dynamicPage");                                                                                                                                                                                                                       
      },                                                                                                                                                                                                                                                       
      goMainMenu: function () {                                                                                                                                                                                                                                
        this._handleNavigationToStep(0);                                                                                                                                                                                                                       
        this.getOwnerComponent().getRouter().navTo("RouteView1");                                                                                                                                                                                              
      },                                                                                                                                                                                                                                                       
      //!iskonto view                                                                                                                                                                                                                                          
      confirmDiscount: function () {                                                                                                                                                                                                                           
        var oModelSepet = this.getOwnerComponent().getModel("AddBasket");                                                                                                                                                                                      
        oModelSepet.setProperty("/inputsVisible", true);                                                                                                                                                                                                       
                                                                                                                                                                                                                                                               
      },                                                                                                                                                                                                                                                       
      //!iskonto submit                                                                                                                                                                                                                                        
      handleDiscountSubmit:async  function (oEvent) {                                                                                                                                                                                                          
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;                                                                                                                                                                                                               
        this.getView().setBusy(true);                                                                                                                                                                                                                          
        var oModelSepet = this.getOwnerComponent().getModel("AddBasket");                                                                                                                                                                                      
        var sepettekiUrunler = oModelSepet.getProperty("/sepet/sepet");                                                                                                                                                                                        
        var tableItems = this.getView().byId("idSepetTable").getItems();                                                                                                                                                                                       
        var magazaKod = oModelSepet.getProperty("/Salesman").MagazaKod;                                                                                                                                                                                        
        var paymentType = oModelSepet.getProperty("/PaymentType");                                                                                                                                                                                             
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;                                                                                                                                                                                                                                 
        var satisSorumlusu = oModelSepet.getProperty("/Salesman").PersonelNo;                                                                                                                                                                                  
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;                                                                                                                                                                                                                           
                                                                                                                                                                                                                                                               
        sepettekiUrunler.forEach(function (urun) {                                                                                                                                                                                                             
          // var urunIsmi = urun.Maktxuz;                                                                                                                                                                                                                      
          var urunId = urun.id.toString();                                                                                                                                                                                                                     
          tableItems.some(function (item) {                                                                                                                                                                                                                    
            var itemId = item.getCells()[0].getText();                                                                                                                                                                                                         
            if (urunId === itemId) {                                                                                                                                                                                                                           
              var discountPercent = item.getCells()[5].getValue();                                                                                                                                                                                             
              // var discountPrice = item.getCells()[6].getValue();                                                                                                                                                                                            
              // ÃrÃ¼n objesine indirim deÄerlerini ekle                                                                                                                                                                                                     
              urun.discountPercent =                                                                                                                                                                                                                           
                discountPercent === null || discountPercent === ""                                                                                                                                                                                             
                  ? "0"                                                                                                                                                                                                                                        
                  : discountPercent; // EÄer indirim yÃ¼zdesi yoksa "0" olarak ayarla                                                                                                                                                                         
              // urun.discountPrice =                                                                                                                                                                                                                          
              //   discountPrice === null || discountPrice === ""                                                                                                                                                                                              
              //     ? "0"                                                                                                                                                                                                                                     
              //     : discountPrice; // EÄer indirim fiyatÄ± yoksa "0" olarak ayarla                                                                                                                                                                         
              return true; // DÃ¶ngÃ¼yÃ¼ durdurmak iÃ§in true dÃ¶ndÃ¼r                                                                                                                                                                                         
            }                                                                                                                                                                                                                                                  
            return false; // DÃ¶ngÃ¼ye devam etmek iÃ§in false dÃ¶ndÃ¼r                                                                                                                                                                                        
          });                                                                                                                                                                                                                                                  
        });                                                                                                                                                                                                                                                    
                                                                                                                                                                                                                                                               
        var MusteriNo = musteri.No;                                                                                                                                                                                                                            
                                                                                                                                                                                                                                                               
        var simkey = oModelSepet.getProperty("/Simkey");                                                                                                                                                                                                       
        var teklifNoDefault = oModelSepet.getProperty("/TeklifNo");                                                                                                                                                                                            
        var totalDisPercent = this.getView().byId("idInputTotalDisPercent").getValue();                                                                                                                                                                        
        totalDisPercent = totalDisPercent ? totalDisPercent : "0"; // If totalDisPercent is not available, set it to "0"                                                                                                                                       
        oModelSepet.setProperty("/idInputTotalDisPercent",totalDisPercent);                                                                                                                                                                                    
        // oModelSepet.setProperty("/Simkey",simkey);                                                                                                                                                                                                          
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;                                                                                                                                                                                                                     
                                                                                                                                                                                                                                                               
        // var totalDisPrice = this.getView().byId("indirimliOdenecekTutar").getValue();                                                                                                                                                                       
        // totalDisPrice = totalDisPrice ? totalDisPrice : "0"; // If totalDisPercent is not available, set it to "0"                                                                                                                                          
        // oModelSepet.setProperty("/TotalDisPercent", totalDisPercent);                                                                                                                                                                                       
        oModelSepet.setProperty("/TotalDisPrice", "0");                                                                                                                                                                                                        
        // if (totalDisPrice==="0" || totalDisPrice==="") {                                                                                                                                                                                                    
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;                                                                                                                                                                                                   
        //   totalDisPercent = oModelSepet.getProperty("/idInputTotalDisPercent");                                                                                                                                                                             
        // }	;                                                                                                                                                                                                                                                 
        var fiyatIskontoHeaderToItemNav = [];                                                                                                                                                                                                                  
                                                                                                                                                                                                                                                               
        // Loop through each item in the shopping cart                                                                                                                                                                                                         
        sepettekiUrunler.forEach(function (eleman, index) {                                                                                                                                                                                                    
          var yeniItem = {                                                                                                                                                                                                                                     
            Simkey: simkey,                                                                                                                                                                                                                                    
            Kalem: ((index + 1) * 10).toString(),                                                                                                                                                                                                              
            ItemGuid: eleman.id.toString(),                                                                                                                                                                                                                    
            MalzemeNo: eleman.Metacode, // SeÃ§ilen matnr                                                                                                                                                                                                      
            Miktar: eleman.count.toString(), // SeÃ§ilen Ã¼rÃ¼n miktarÄ±                                                                                                                                                                                       
            IskontoYuzde: eleman.discountPercent, // SeÃ§ilen Ã¼rÃ¼n iskonto yuzde                                                                                                                                                                             
            // IskontoTutar: eleman.discountPrice, // SeÃ§ilen Ã¼rÃ¼n iskonto tutar                                                                                                                                                                            
          };                                                                                                                                                                                                                                                   
                                                                                                                                                                                                                                                               
          fiyatIskontoHeaderToItemNav.push(yeniItem);                                                                                                                                                                                                          
          // Yeni Ã¶Äeyi yeni dizimize ekle                                                                                                                                                                                                                   
        });                                                                                                                                                                                                                                                    
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;                                                                                                                                                                                                                     
        // Create a new object for the current item and push it into the array                                                                                                                                                                                 
&nbsp;&nbsp;&nbsp;&nbsp;                                                                                                                                                                                                                                       
        var payload = {                                                                                                                                                                                                                                        
          Simkey: simkey,                                                                                                                                                                                                                                      
          MusteriNo: MusteriNo,                                                                                                                                                                                                                                
          GenelIskontoYuzde: totalDisPercent,                                                                                                                                                                                                                  
          SonToplamTutar: "0",                                                                                                                                                                                                                                 
          FiyatIskontoHeaderToItemNav: fiyatIskontoHeaderToItemNav,                                                                                                                                                                                            
          Bolge:magazaKod,                                                                                                                                                                                                                                     
          SatisSorumlusu:satisSorumlusu,                                                                                                                                                                                                                       
          OdemeTuru: paymentType,                                                                                                                                                                                                                              
          TeklifNo: teklifNoDefault                                                                                                                                                                                                                            
        };                                                                                                                                                                                                                                                     
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;                                                                                                                                                                                                                     
        setTimeout(                                                                                                                                                                                                                                            
          function () {                                                                                                                                                                                                                                        
            this.getView().setBusy(false);                                                                                                                                                                                                                     
          }.bind(this),                                                                                                                                                                                                                                        
          500                                                                                                                                                                                                                                                  
        );                                                                                                                                                                                                                                                     
                                                                                                                                                                                                                                                               
        // Send the payload to the backend entity set                                                                                                                                                                                                          
        this.getView().setBusy(true);                                                                                                                                                                                                                          
        this.getOwnerComponent()                                                                                                                                                                                                                               
          .getModel()                                                                                                                                                                                                                                          
          .create("/FiyatIskontoHeaderSet", payload, {                                                                                                                                                                                                         
            success: function (data) {                                                                                                                                                                                                                         
               var teklifNo = data.TeklifNo;                                                                                                                                                                                                                   
              sepettekiUrunler.forEach(function (item) {                                                                                                                                                                                                       
                var itemID = item.id.toString();                                                                                                                                                                                                               
                data.FiyatIskontoHeaderToItemNav.results.forEach(function (                                                                                                                                                                                    
                  oDataItem                                                                                                                                                                                                                                    
                ) {                                                                                                                                                                                                                                            
                  var odataId = oDataItem.ItemGuid;                                                                                                                                                                                                            
                  if (itemID === odataId) {                                                                                                                                                                                                                    
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;                                                                                                                                                         
                    item.DiscountedTutar = oDataItem.ToplamTutar;                                                                                                                                                                                              
                    item.BirimDiscountedTutar = oDataItem.BirimIndirimTutar;                                                                                                                                                                                   
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;                                                                                                                                             
                    item.GenelIskontoYuzde = oDataItem.GenelIskontoYuzde;                                                                                                                                                                                      
                    item.FarkYuvarla = oDataItem.FarkYuvarla;                                                                                                                                                                                                  
                    // todo teklifno                                                                                                                                                                                                                           
                    // item.TeklifNo = oDataItem.TeklifNo;                                                                                                                                                                                                     
                                                                                                                                                                                                                                                               
                    item.BirimIndirimTutar = oDataItem.BirimIndirimTutar;                                                                                                                                                                                      
                    item.tutar = oDataItem.ToplamTutar;                                                                                                                                                                                                        
                    // item.BirimToplamTutar = item.Tutar2 * item.count;                                                                                                                                                                                       
                    item.BirimToplamTutar = parseFloat(item.Tutar) * parseInt(item.count);                                                                                                                                                                     
                  }                                                                                                                                                                                                                                            
                });                                                                                                                                                                                                                                            
              });&nbsp;&nbsp;                                                                                                                                                                                                                                  
              this.getView().setBusy(false);                                                                                                                                                                                                                   
              oModelSepet.setProperty("/sepet/sepet", sepettekiUrunler);                                                                                                                                                                                       
              oModelSepet.setProperty("/ProductsTotalPrice", data.ToplamTutar);                                                                                                                                                                                
              oModelSepet.setProperty("/TotalPriceWithoutVAT", data.NetTutar);                                                                                                                                                                                 
              oModelSepet.setProperty("/ProductsTotalVAT", data.Kdv);                                                                                                                                                                                          
              oModelSepet.setProperty("/ToplamIndirimTutar", data.ToplamIndirimTutar);                                                                                                                                                                         
              oModelSepet.setProperty("/FarkYuvarla", data.FarkYuvarla);                                                                                                                                                                                       
              oModelSepet.setProperty("/TeklifNo", teklifNo);                                                                                                                                                                                                  
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;                                                                                                                                                                                                                                 
              this.getView().setBusy(false);                                                                                                                                                                                                                   
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;                                                                                                                                                                           
            }.bind(this),                                                                                                                                                                                                                                      
            error: function (error) {                                                                                                                                                                                                                          
              this.getView().setBusy(false);                                                                                                                                                                                                                   
              var errorObject = error.responseText;                                                                                                                                                                                                            
              errorObject = JSON.parse(error.responseText);                                                                                                                                                                                                    
              errorObject = errorObject.error.innererror.errordetails[0].message;                                                                                                                                                                              
              oModelSepet.setProperty("/ErrorOn", true);                                                                                                                                                                                                       
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;                                                                                                                                                                           
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;                                                                                                                                                                                             
              MessageBox.error("Error occurred: " + errorObject);                                                                                                                                                                                              
              // MessageBox.error("Error occurred: " + error.responseText);                                                                                                                                                                                    
            }.bind(this),                                                                                                                                                                                                                                      
          });                                                                                                                                                                                                                                                  
        this.getView().setBusy(false);                                                                                                                                                                                                                         
      },                                                                                                                                                                                                                                                       
      currentChangeHandler: function (oEvent) {                                                                                                                                                                                                                
        var oModel = this.getOwnerComponent().getModel("AddBasket");                                                                                                                                                                                           
        adet = oEvent.mParameters.value;                                                                                                                                                                                                                       
                                                                                                                                                                                                                                                               
        var fDisPrice = oModel.getProperty(                                                                                                                                                                                                                    
          oEvent.getSource().getBindingContext("AddBasket").getPath() +                                                                                                                                                                                        
            "/BirimDiscountedTutar"                                                                                                                                                                                                                            
        );                                                                                                                                                                                                                                                     
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;                                                                                                                                                                                                                     
        //discont varsa                                                                                                                                                                                                                                        
        if (fDisPrice) {                                                                                                                                                                                                                                       
          this.getView().setBusy(true);                                                                                                                                                                                                                        
          this.handleDiscountSubmit();                                                                                                                                                                                                                         
                                                                                                                                                                                                                                                               
          var fPrice2 = oModel.getProperty(                                                                                                                                                                                                                    
            oEvent.getSource().getBindingContext("AddBasket").getPath() +                                                                                                                                                                                      
              "BirimToplamTutar"                                                                                                                                                                                                                               
          );                                                                                                                                                                                                                                                   
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;                                                                                                                                                                                                         
          var fPrice = oModel.getProperty(                                                                                                                                                                                                                     
            oEvent.getSource().getBindingContext("AddBasket").getPath() +                                                                                                                                                                                      
              "/Tutar"                                                                                                                                                                                                                                         
          );                                                                                                                                                                                                                                                   
          var sPath = oEvent                                                                                                                                                                                                                                   
            .getSource()                                                                                                                                                                                                                                       
            .getBindingContext("AddBasket")                                                                                                                                                                                                                    
            .getPath();                                                                                                                                                                                                                                        
          var fResult = adet * parseFloat(fPrice);                                                                                                                                                                                                             
          var formattedResult = fResult.toFixed(3);                                                                                                                                                                                                            
        ;                                                                                                                                                                                                                                                      
          oModel.setProperty(sPath + "/tutar", formattedResult);                                                                                                                                                                                               
          this.getView().setBusy(false);                                                                                                                                                                                                                       
          //discont yoksa                                                                                                                                                                                                                                      
                                                                                                                                                                                                                                                               
        } else {                                                                                                                                                                                                                                               
&nbsp;&nbsp;                                                                                                                                                                                                                                                   
          var fPrice = oModel.getProperty(                                                                                                                                                                                                                     
            oEvent.getSource().getBindingContext("AddBasket").getPath() +                                                                                                                                                                                      
              "/Tutar"                                                                                                                                                                                                                                         
          );                                                                                                                                                                                                                                                   
          // var fPrice2 = oModel.getProperty(                                                                                                                                                                                                                 
          //   oEvent.getSource().getBindingContext("AddBasket").getPath() +                                                                                                                                                                                   
          //     "/BirimToplamTutar"                                                                                                                                                                                                                           
          // );                                                                                                                                                                                                                                                
          var sPath = oEvent                                                                                                                                                                                                                                   
            .getSource()                                                                                                                                                                                                                                       
            .getBindingContext("AddBasket")                                                                                                                                                                                                                    
            .getPath();                                                                                                                                                                                                                                        
          var fResult = adet * parseFloat(fPrice);                                                                                                                                                                                                             
          // var fResult2 = adet * parseFloat(fPrice2);                                                                                                                                                                                                        
          var formattedResult = fResult.toFixed(3);                                                                                                                                                                                                            
          // var formattedResult2 = fResult2.toFixed(3);                                                                                                                                                                                                       
                                                                                                                                                                                                                                                               
          var fKDV = oModel.getProperty(                                                                                                                                                                                                                       
            oEvent.getSource().getBindingContext("AddBasket").getPath() + "/Kdv"                                                                                                                                                                               
          );                                                                                                                                                                                                                                                   
          var fKDVResult = adet * parseFloat(fKDV);                                                                                                                                                                                                            
          var formattedKDVResult = fKDVResult.toFixed(3);                                                                                                                                                                                                      
                                                                                                                                                                                                                                                               
          var fToplamKDVsiz = oModel.getProperty(                                                                                                                                                                                                              
            oEvent.getSource().getBindingContext("AddBasket").getPath() +                                                                                                                                                                                      
              "/Price"                                                                                                                                                                                                                                         
          );                                                                                                                                                                                                                                                   
          var fKDVsizTopResult = adet * parseFloat(fToplamKDVsiz);                                                                                                                                                                                             
          var formattedKDVsizTopResult = fKDVsizTopResult.toFixed(3);                                                                                                                                                                                          
                                                                                                                                                                                                                                                               
          oModel.setProperty(sPath + "/tutar", formattedResult);                                                                                                                                                                                               
          oModel.setProperty(sPath + "/BirimToplamTutar", formattedResult);                                                                                                                                                                                    
          oModel.setProperty(sPath + "/toplamKDV", formattedKDVResult);                                                                                                                                                                                        
          oModel.setProperty(                                                                                                                                                                                                                                  
            sPath + "/toplamKDVsizFiyat",                                                                                                                                                                                                                      
            formattedKDVsizTopResult                                                                                                                                                                                                                           
          );                                                                                                                                                                                                                                                   
          oModel.setProperty(sPath + "/count", adet);                                                                                                                                                                                                          
          // oModel.setProperty(sPath + "/DiscountedTutar", formattedDisResult);                                                                                                                                                                               
                                                                                                                                                                                                                                                               
          oModel.refresh();                                                                                                                                                                                                                                    
                                                                                                                                                                                                                                                               
          let aBasket = this.getView()                                                                                                                                                                                                                         
            .getModel("AddBasket")                                                                                                                                                                                                                             
            .getProperty("/sepet/sepet");                                                                                                                                                                                                                      
          var productsTotalPrice = aBasket.reduce(                                                                                                                                                                                                             
            (acc, item) =>                                                                                                                                                                                                                                     
              (parseFloat(acc) + parseFloat(item.tutar)).toString(),                                                                                                                                                                                           
            "0"                                                                                                                                                                                                                                                
          );                                                                                                                                                                                                                                                   
          var totalPriceWithoutVAT = aBasket.reduce(                                                                                                                                                                                                           
            (acc, item) =>                                                                                                                                                                                                                                     
              (parseFloat(acc) + parseFloat(item.toplamKDVsizFiyat)).toString(),                                                                                                                                                                               
            "0"                                                                                                                                                                                                                                                
          );                                                                                                                                                                                                                                                   
          var productsTotalVAT = aBasket.reduce(                                                                                                                                                                                                               
            (acc, item) =>                                                                                                                                                                                                                                     
              (parseFloat(acc) + parseFloat(item.toplamKDV)).toString(),                                                                                                                                                                                       
            "0"                                                                                                                                                                                                                                                
          );                                                                                                                                                                                                                                                   
          oModel.setProperty("/ProductsTotalPrice", productsTotalPrice);                                                                                                                                                                                       
          oModel.setProperty("/TotalPriceWithoutVAT", totalPriceWithoutVAT);                                                                                                                                                                                   
          oModel.setProperty("/ProductsTotalVAT", productsTotalVAT);                                                                                                                                                                                           
        }                                                                                                                                                                                                                                                      
      },                                                                                                                                                                                                                                                       
      handleDelete: function (oEvent) {                                                                                                                                                                                                                        
        var oModel = this.getOwnerComponent().getModel("AddBasket");                                                                                                                                                                                           
        var listItem = oEvent.getParameter("listItem");                                                                                                                                                                                                        
        var table = this.getView().byId("idSepetTable");                                                                                                                                                                                                       
        var items = table.getItems();                                                                                                                                                                                                                          
        if (items.length === 1) {                                                                                                                                                                                                                              
          this._handleNavigationToStep(0);                                                                                                                                                                                                                     
                                                                                                                                                                                                                                                               
          this.onClearBasket();                                                                                                                                                                                                                                
        } else {                                                                                                                                                                                                                                               
          var delProductId = listItem                                                                                                                                                                                                                          
            .getBindingContext("AddBasket")                                                                                                                                                                                                                    
            .getProperty("id");                                                                                                                                                                                                                                
          //model Ã¼zerinden silme iÅlemi                                                                                                                                                                                                                     
          let aBasket = this.getView()                                                                                                                                                                                                                         
            .getModel("AddBasket")                                                                                                                                                                                                                             
            .getProperty("/sepet/sepet");                                                                                                                                                                                                                      
          aBasket = aBasket.filter(function (item) {                                                                                                                                                                                                           
            return item.id !== delProductId;                                                                                                                                                                                                                   
          });                                                                                                                                                                                                                                                  
                                                                                                                                                                                                                                                               
          this.getView()                                                                                                                                                                                                                                       
            .getModel("AddBasket")                                                                                                                                                                                                                             
            .setProperty("/sepet/sepet", aBasket);                                                                                                                                                                                                             
                                                                                                                                                                                                                                                               
          this.handleDiscountSubmit();                                                                                                                                                                                                                         
                                                                                                                                                                                                                                                               
          oModel.refresh();                                                                                                                                                                                                                                    
        }                                                                                                                                                                                                                                                      
      },                                                                                                                                                                                                                                                       
      onCheckBoxChange: function (oEvent) {                                                                                                                                                                                                                    
        var oModelSepet = this.getOwnerComponent().getModel("AddBasket");                                                                                                                                                                                      
        var selectedButton = oEvent.getSource();                                                                                                                                                                                                               
        var selectedText = selectedButton.getText();                                                                                                                                                                                                           
        if (selectedText === this.getView().getModel("i18n").getResourceBundle().getText("gercekKisi")) {                                                                                                                                                      
            // Logic for "GerÃ§ek KiÅi"                                                                                                                                                                                                                       
            oModelSepet.setProperty("/GercekKisi", true);                                                                                                                                                                                                      
        } else if (selectedText === this.getView().getModel("i18n").getResourceBundle().getText("tuzelKisi")) {                                                                                                                                                
            // Logic for "TÃ¼zel KiÅi"                                                                                                                                                                                                                        
            oModelSepet.setProperty("/GercekKisi", false);                                                                                                                                                                                                     
        }                                                                                                                                                                                                                                                      
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;                                                                                                                                                                                                                     
                                                                                                                                                                                                                                                               
                                                                                                                                                                                                                                                               
                                                                                                                                                                                                                                                               
                                                                                                                                                                                                                                                               
      },                                                                                                                                                                                                                                                       
                                                                                                                                                                                                                                                               
      setProductType: function (evt) {                                                                                                                                                                                                                         
        var productType = evt.getSource().getTitle();                                                                                                                                                                                                          
        this.model.setProperty("/productType", productType);                                                                                                                                                                                                   
        this.byId("ProductStepChosenType").setText(                                                                                                                                                                                                            
          "Chosen product type: " + productType                                                                                                                                                                                                                
        );                                                                                                                                                                                                                                                     
        this._wizard.validateStep(this.byId("ProductTypeStep"));                                                                                                                                                                                               
      },                                                                                                                                                                                                                                                       
                                                                                                                                                                                                                                                               
      setProductTypeFromSegmented: function (evt) {                                                                                                                                                                                                            
        var productType = evt.getParameters().item.getText();                                                                                                                                                                                                  
        this.model.setProperty("/productType", productType);                                                                                                                                                                                                   
        this._wizard.validateStep(this.byId("ProductTypeStep"));                                                                                                                                                                                               
      },                                                                                                                                                                                                                                                       
                                                                                                                                                                                                                                                               
      onSuggest: function () {},                                                                                                                                                                                                                               
                                                                                                                                                                                                                                                               
      additionalInfoValidation: function () {},                                                                                                                                                                                                                
                                                                                                                                                                                                                                                               
      optionalStepActivation: function () {                                                                                                                                                                                                                    
        bolgeAdi = this.getOwnerComponent()                                                                                                                                                                                                                    
          .getModel("AddBasket")                                                                                                                                                                                                                               
          .getProperty("/Salesman").BolgeAdi;                                                                                                                                                                                                                  
        personelAdi = this.getOwnerComponent()                                                                                                                                                                                                                 
          .getModel("AddBasket")                                                                                                                                                                                                                               
          .getProperty("/Salesman").PersonelName;                                                                                                                                                                                                              
        magazaKodu = this.getOwnerComponent()                                                                                                                                                                                                                  
          .getModel("AddBasket")                                                                                                                                                                                                                               
          .getProperty("/Salesman").MagazaKod;                                                                                                                                                                                                                 
        personelKodu = this.getOwnerComponent()                                                                                                                                                                                                                
          .getModel("AddBasket")                                                                                                                                                                                                                               
          .getProperty("/Salesman").PersonelNo;                                                                                                                                                                                                                
        this.getView().byId("idSalesmanInput").setValue(personelAdi);                                                                                                                                                                                          
        this.getView().byId("idMagazaKodu").setValue(bolgeAdi);                                                                                                                                                                                                
                                                                                                                                                                                                                                                               
        // var kod = this.byId("idMagazaKodu").getValue();                                                                                                                                                                                                     
                                                                                                                                                                                                                                                               
        this.getOwnerComponent()                                                                                                                                                                                                                               
          .getModel()                                                                                                                                                                                                                                          
          // .read("/HeaderBolgeSet('" + kod + "')/BolgeToSatSor", {                                                                                                                                                                                           
          .read("/HeaderBolgeSet('" + magazaKodu + "')/BolgeToSatSor", {                                                                                                                                                                                       
            success: function (data) {                                                                                                                                                                                                                         
              saticilar = data.results;                                                                                                                                                                                                                        
              this.siparisModel.setProperty("/salesmanInfo", saticilar);                                                                                                                                                                                       
                                                                                                                                                                                                                                                               
              // this.getOwnerComponent()                                                                                                                                                                                                                      
              //   .getModel("AddBasket")                                                                                                                                                                                                                      
              //   .setProperty("/salesmanInfo", satici);                                                                                                                                                                                                      
              this.getOwnerComponent()                                                                                                                                                                                                                         
                .getModel("AddBasket")                                                                                                                                                                                                                         
                .setProperty("/SalesmanInfo", saticilar);                                                                                                                                                                                                      
            }.bind(this),                                                                                                                                                                                                                                      
            error: function (error) {                                                                                                                                                                                                                          
              MessageBox.error("Error occurred: " + error.responseText);                                                                                                                                                                                       
            },                                                                                                                                                                                                                                                 
          });                                                                                                                                                                                                                                                  
      },                                                                                                                                                                                                                                                       
                                                                                                                                                                                                                                                               
      selectSalesman: function (oEvent) {                                                                                                                                                                                                                      
        // var salesmanInfo = this.getView()                                                                                                                                                                                                                   
        //   .byId("idSalesmanInput")                                                                                                                                                                                                                          
        //   .getValue()                                                                                                                                                                                                                                       
        //   .toUpperCase();                                                                                                                                                                                                                                   
                                                                                                                                                                                                                                                               
        var oSelectedItem = oEvent.getParameter("selectedItem");                                                                                                                                                                                               
        if (oSelectedItem) {                                                                                                                                                                                                                                   
          var sVorna = oSelectedItem                                                                                                                                                                                                                           
            .getBindingContext("AddBasket")                                                                                                                                                                                                                    
            .getProperty("Vorna");                                                                                                                                                                                                                             
          var sNachn = oSelectedItem                                                                                                                                                                                                                           
            .getBindingContext("AddBasket")                                                                                                                                                                                                                    
            .getProperty("Nachn");                                                                                                                                                                                                                             
          var perNo = oSelectedItem                                                                                                                                                                                                                            
            .getBindingContext("AddBasket")                                                                                                                                                                                                                    
            .getProperty("Pernr");                                                                                                                                                                                                                             
          var kdgrp = oSelectedItem                                                                                                                                                                                                                            
            .getBindingContext("AddBasket")                                                                                                                                                                                                                    
            .getProperty("Kdgrp");                                                                                                                                                                                                                             
          var salesmanName = sVorna + " " + sNachn;                                                                                                                                                                                                            
                                                                                                                                                                                                                                                               
          var perData = {                                                                                                                                                                                                                                      
            PersonelName: salesmanName,                                                                                                                                                                                                                        
            PersonelNo: perNo,                                                                                                                                                                                                                                 
            MagazaKod: kdgrp,                                                                                                                                                                                                                                  
          };                                                                                                                                                                                                                                                   
          // Salesman/PersonelName                                                                                                                                                                                                                             
          // Do something with the selected salesmanInfo                                                                                                                                                                                                       
        }                                                                                                                                                                                                                                                      
                                                                                                                                                                                                                                                               
                                                                                                                                                                                                                                                               
        this.getOwnerComponent()                                                                                                                                                                                                                               
          .getModel("AddBasket")                                                                                                                                                                                                                               
          .setProperty("/Salesman", perData);                                                                                                                                                                                                                  
      },                                                                                                                                                                                                                                                       
                                                                                                                                                                                                                                                               
      pricingActivate: function () {                                                                                                                                                                                                                           
        this.model.setProperty("/navApiEnabled", true);                                                                                                                                                                                                        
      },                                                                                                                                                                                                                                                       
                                                                                                                                                                                                                                                               
      pricingComplete: function () {                                                                                                                                                                                                                           
        this.model.setProperty("/navApiEnabled", false);                                                                                                                                                                                                       
      },                                                                                                                                                                                                                                                       
                                                                                                                                                                                                                                                               
      scrollFrom4to2: function () {                                                                                                                                                                                                                            
        this._wizard.goToStep(this.byId("ProductInfoStep"));                                                                                                                                                                                                   
      },                                                                                                                                                                                                                                                       
                                                                                                                                                                                                                                                               
      goFrom4to3: function () {                                                                                                                                                                                                                                
        if (this._wizard.getProgressStep() === this.byId("PricingStep")) {                                                                                                                                                                                     
          this._wizard.previousStep();                                                                                                                                                                                                                         
        }                                                                                                                                                                                                                                                      
      },                                                                                                                                                                                                                                                       
                                                                                                                                                                                                                                                               
      goFrom4to5: function () {                                                                                                                                                                                                                                
        if (this._wizard.getProgressStep() === this.byId("PricingStep")) {                                                                                                                                                                                     
          this._wizard.nextStep();                                                                                                                                                                                                                             
        }                                                                                                                                                                                                                                                      
      },                                                                                                                                                                                                                                                       
                                                                                                                                                                                                                                                               
      wizardCompletedHandler: function () {                                                                                                                                                                                                                    
        this._oNavContainer.to(this.byId("wizardReviewPage"));                                                                                                                                                                                                 
      },                                                                                                                                                                                                                                                       
                                                                                                                                                                                                                                                               
      backToWizardContent: function () {                                                                                                                                                                                                                       
        this._oNavContainer.backToPage(this._oWizardContentPage.getId());                                                                                                                                                                                      
      },                                                                                                                                                                                                                                                       
                                                                                                                                                                                                                                                               
      editStepOne: function () {                                                                                                                                                                                                                               
        this._handleNavigationToStep(0);                                                                                                                                                                                                                       
      },                                                                                                                                                                                                                                                       
                                                                                                                                                                                                                                                               
      editStepTwo: function () {                                                                                                                                                                                                                               
        this._handleNavigationToStep(1);                                                                                                                                                                                                                       
      },                                                                                                                                                                                                                                                       
                                                                                                                                                                                                                                                               
      editStepThree: function () {                                                                                                                                                                                                                             
        this._handleNavigationToStep(2);                                                                                                                                                                                                                       
      },                                                                                                                                                                                                                                                       
                                                                                                                                                                                                                                                               
      editStepFour: function () {                                                                                                                                                                                                                              
        this._handleNavigationToStep(3);                                                                                                                                                                                                                       
      },                                                                                                                                                                                                                                                       
                                                                                                                                                                                                                                                               
      _handleNavigationToStep: function (iStepNumber) {                                                                                                                                                                                                        
        var fnAfterNavigate = function () {                                                                                                                                                                                                                    
          this._wizard.goToStep(this._wizard.getSteps()[iStepNumber]);                                                                                                                                                                                         
          this._oNavContainer.detachAfterNavigate(fnAfterNavigate);                                                                                                                                                                                            
        }.bind(this);                                                                                                                                                                                                                                          
                                                                                                                                                                                                                                                               
        this._oNavContainer.attachAfterNavigate(fnAfterNavigate);                                                                                                                                                                                              
        this.backToWizardContent();                                                                                                                                                                                                                            
      },                                                                                                                                                                                                                                                       
                                                                                                                                                                                                                                                               
      _handleMessageBoxOpen: function (sMessage, sMessageBoxType) {                                                                                                                                                                                            
        MessageBox[sMessageBoxType](sMessage, {                                                                                                                                                                                                                
          actions: [MessageBox.Action.YES, MessageBox.Action.NO],                                                                                                                                                                                              
          onClose: function (oAction) {                                                                                                                                                                                                                        
            if (oAction === MessageBox.Action.YES) {                                                                                                                                                                                                           
              // this._handleNavigationToStep(0);                                                                                                                                                                                                              
              // this._wizard.discardProgress(this._wizard.getSteps()[0]);                                                                                                                                                                                     
              this.siparisCreate();                                                                                                                                                                                                                            
            }                                                                                                                                                                                                                                                  
          }.bind(this),                                                                                                                                                                                                                                        
        });                                                                                                                                                                                                                                                    
      },                                                                                                                                                                                                                                                       
      _handleMessageBoxOpenCancel: function (sMessage, sMessageBoxType) {                                                                                                                                                                                      
        MessageBox[sMessageBoxType](sMessage, {                                                                                                                                                                                                                
          actions: [MessageBox.Action.YES, MessageBox.Action.NO],                                                                                                                                                                                              
          onClose: function (oAction) {                                                                                                                                                                                                                        
            if (oAction === MessageBox.Action.YES) {                                                                                                                                                                                                           
              // this._handleNavigationToStep(0);                                                                                                                                                                                                              
              //siparis iptal ve cikis                                                                                                                                                                                                                         
              var oModelSepet = this.getOwnerComponent().getModel("AddBasket");                                                                                                                                                                                
              oModelSepet.setProperty("/buttonEnable", false);                                                                                                                                                                                                 
              oModelSepet.setProperty("/cancelButtonEnable", true);                                                                                                                                                                                            
              this.onClearBasket();                                                                                                                                                                                                                            
            }                                                                                                                                                                                                                                                  
          }.bind(this),                                                                                                                                                                                                                                        
        });                                                                                                                                                                                                                                                    
      },                                                                                                                                                                                                                                                       
                                                                                                                                                                                                                                                               
      _setEmptyValue: function (sPath) {                                                                                                                                                                                                                       
        this.model.setProperty(sPath, "n/a");                                                                                                                                                                                                                  
      },                                                                                                                                                                                                                                                       
      onClearBasket: function () {                                                                                                                                                                                                                             
        var oModelSepet = this.getOwnerComponent().getModel("AddBasket");                                                                                                                                                                                      
        oModelSepet.setProperty("/inputsVisible", false);                                                                                                                                                                                                      
        oModelSepet.setProperty("/step0", false);                                                                                                                                                                                                              
        oModelSepet.setProperty("/step1", false);                                                                                                                                                                                                              
        oModelSepet.setProperty("/step2", false);                                                                                                                                                                                                              
        oModelSepet.setProperty("/step3", false);                                                                                                                                                                                                              
        oModelSepet.setProperty("/updateEnable", false);                                                                                                                                                                                                       
        oModelSepet.setProperty("/createEnable", false);                                                                                                                                                                                                       
        musteri = undefined;                                                                                                                                                                                                                                   
        oModelSepet.setProperty("/sepet/sepet", []);                                                                                                                                                                                                           
        oModelSepet.setProperty("/customerInfo", {});                                                                                                                                                                                                          
        oModelSepet.setProperty("/salesmanInfo", {});                                                                                                                                                                                                          
        oModelSepet.setProperty("/basket", []);                                                                                                                                                                                                                
        this.getView().byId("idMusteriName").setText("");                                                                                                                                                                                                      
        this.getView().byId("idMusteriTel").setText("");                                                                                                                                                                                                       
        this.getView().byId("idMusteriOrt").setText("");                                                                                                                                                                                                       
        this.getView().byId("idMusteriEmail").setText("");                                                                                                                                                                                                     
        this.getView().byId("idMusteriNo").setText("");                                                                                                                                                                                                        
        this.getView().byId("idSearchName").setValue("");                                                                                                                                                                                                      
        this.getView().byId("idSearchTc").setValue("");                                                                                                                                                                                                        
        this.getView().byId("idSearchTel").setValue("");                                                                                                                                                                                                       
        oModelSepet.setProperty("/ToplamIndirimTutar", "");                                                                                                                                                                                                    
                                                                                                                                                                                                                                                               
        this.getView().byId("idInputTotalDisPercent").setValue("");                                                                                                                                                                                            
                                                                                                                                                                                                                                                               
        this.getView().byId("idInputDisPercent").setValue("");                                                                                                                                                                                                 
                                                                                                                                                                                                                                                               
        this._handleNavigationToStep(0);                                                                                                                                                                                                                       
                                                                                                                                                                                                                                                               
        this._wizard.discardProgress(this._wizard.getSteps()[0]);                                                                                                                                                                                              
                                                                                                                                                                                                                                                               
        var sMessage = this.getMessageFromi18n("chartCleared"); //"Alisveris Sepeti Temizlendi"                                                                                                                                                                
        sap.m.MessageToast.show(sMessage);                                                                                                                                                                                                                     
        setTimeout(() => {                                                                                                                                                                                                                                     
          this.getOwnerComponent().getRouter().navTo("RouteView1", {                                                                                                                                                                                           
            param: "test",                                                                                                                                                                                                                                     
          });                                                                                                                                                                                                                                                  
        }, 1000);                                                                                                                                                                                                                                              
      },                                                                                                                                                                                                                                                       
      //!mÃ¼steri temizle                                                                                                                                                                                                                                      
      onClearCustomer: function () {                                                                                                                                                                                                                           
        var oModelSepet = this.getOwnerComponent().getModel("AddBasket");                                                                                                                                                                                      
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;                                                                                                                                                                                                               
        this.getView().byId("idMusteriName").setText("");                                                                                                                                                                                                      
        this.getView().byId("idMusteriTel").setText("");                                                                                                                                                                                                       
        this.getView().byId("idMusteriOrt").setText("");                                                                                                                                                                                                       
        this.getView().byId("idMusteriEmail").setText("");                                                                                                                                                                                                     
        this.getView().byId("idMusteriNo").setText("");                                                                                                                                                                                                        
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;                                                                                                                                                                                                               
        this.getView().byId("idSearchName").setValue("");                                                                                                                                                                                                      
        this.getView().byId("idSearchTc").setValue("");                                                                                                                                                                                                        
        this.getView().byId("idSearchTel").setValue("");                                                                                                                                                                                                       
        oModelSepet.setProperty("/updateEnable", false);                                                                                                                                                                                                       
        oModelSepet.setProperty("/createEnable", true);                                                                                                                                                                                                        
        oModelSepet.setProperty("/step0", false);                                                                                                                                                                                                              
        oModelSepet.setProperty("/step1", false);                                                                                                                                                                                                              
        oModelSepet.setProperty("/step2", false);                                                                                                                                                                                                              
        oModelSepet.setProperty("/step3", false);                                                                                                                                                                                                              
        oModelSepet.setProperty("/customerInfo", {});                                                                                                                                                                                                          
        oModelSepet.setProperty("/GercekKisi", false);                                                                                                                                                                                                         
        musteri = undefined;                                                                                                                                                                                                                                   
        this.fragmentInputClean();                                                                                                                                                                                                                             
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;                                                                                                                                                                                                                     
        // sap.m.MessageToast.show(this.getMessageFromi18n("plsCreateaCustomer1")); //"MÃ¼Återi oluÅturunuz"                                                                                                                                                 
      },                                                                                                                                                                                                                                                       
      //! musteri ara butonu                                                                                                                                                                                                                                   
      musteriAra: function () {                                                                                                                                                                                                                                
        var musteriArray;                                                                                                                                                                                                                                      
        this.getView().setBusy(true);                                                                                                                                                                                                                          
        var searchFieldAd = this.getView()                                                                                                                                                                                                                     
          .byId("idSearchName")                                                                                                                                                                                                                                
          .getValue()                                                                                                                                                                                                                                          
          .toLowerCase();                                                                                                                                                                                                                                      
        var searchFieldTc = this.getView()                                                                                                                                                                                                                     
          .byId("idSearchTc")                                                                                                                                                                                                                                  
          .getValue()                                                                                                                                                                                                                                          
          .toLowerCase();                                                                                                                                                                                                                                      
        var searchFieldTel = this.getView()                                                                                                                                                                                                                    
          .byId("idSearchTel")                                                                                                                                                                                                                                 
          .getValue()                                                                                                                                                                                                                                          
          .toLowerCase();                                                                                                                                                                                                                                      
        if (                                                                                                                                                                                                                                                   
          searchFieldAd.length > 4 ||                                                                                                                                                                                                                          
          searchFieldTc.length > 4 ||                                                                                                                                                                                                                          
          searchFieldTel.length > 4                                                                                                                                                                                                                            
        ) {                                                                                                                                                                                                                                                    
          // Read the data from OData service                                                                                                                                                                                                                  
          this.getOwnerComponent()                                                                                                                                                                                                                             
            .getModel()                                                                                                                                                                                                                                        
            .read(                                                                                                                                                                                                                                             
              // "/MusteriHeaderSet('" + searchValue + "')/MusteriHeaderToItemNav",                                                                                                                                                                            
              "/MusteriHeaderSet(TcVergino='" +                                                                                                                                                                                                                
                searchFieldTc +                                                                                                                                                                                                                                
                "',Adi='" +                                                                                                                                                                                                                                    
                searchFieldAd +                                                                                                                                                                                                                                
                "',Telefon='" +                                                                                                                                                                                                                                
                searchFieldTel +                                                                                                                                                                                                                               
                "')/MusteriHeaderToItemNav",                                                                                                                                                                                                                   
              {                                                                                                                                                                                                                                                
                success: function (oData) {                                                                                                                                                                                                                    
                  musteriArray = oData.results;                                                                                                                                                                                                                
                  this.getOwnerComponent()                                                                                                                                                                                                                     
                    .getModel("MusteriSet")                                                                                                                                                                                                                    
                    .setProperty("/", {                                                                                                                                                                                                                        
                      musteriArray,                                                                                                                                                                                                                            
                    });                                                                                                                                                                                                                                        
                  this.getView().setBusy(false);                                                                                                                                                                                                               
                  this.fragmentLaden();                                                                                                                                                                                                                        
                }.bind(this),                                                                                                                                                                                                                                  
                error: function (error) {                                                                                                                                                                                                                      
                  MessageBox.error("Error occurred: " + error.responseText);                                                                                                                                                                                   
                },                                                                                                                                                                                                                                             
              }                                                                                                                                                                                                                                                
            );                                                                                                                                                                                                                                                 
          this.getView().setBusy(false);                                                                                                                                                                                                                       
        }                                                                                                                                                                                                                                                      
        this.getView().setBusy(false);                                                                                                                                                                                                                         
      },                                                                                                                                                                                                                                                       
      onSearchChange: function (oEvent) {                                                                                                                                                                                                                      
        var musteriArray;                                                                                                                                                                                                                                      
        var TcVergino = "";                                                                                                                                                                                                                                    
        var Telefon = "";                                                                                                                                                                                                                                      
        var Ad = "";                                                                                                                                                                                                                                           
        var searchFieldId = oEvent.getParameter("id").split("--").pop();                                                                                                                                                                                       
        var searchValue = this.getView()                                                                                                                                                                                                                       
          .byId(searchFieldId)                                                                                                                                                                                                                                 
          .getValue()                                                                                                                                                                                                                                          
          .toLowerCase();                                                                                                                                                                                                                                      
        switch (searchFieldId) {                                                                                                                                                                                                                               
          case "idSearchTel":                                                                                                                                                                                                                                  
            Telefon = searchValue !== "" ? searchValue : "";                                                                                                                                                                                                   
            break;                                                                                                                                                                                                                                             
          case "idSearchTc":                                                                                                                                                                                                                                   
            TcVergino = searchValue !== "" ? searchValue : "";                                                                                                                                                                                                 
            break;                                                                                                                                                                                                                                             
          case "idSearchName":                                                                                                                                                                                                                                 
            Ad = searchValue !== "" ? searchValue : "";                                                                                                                                                                                                        
            break;                                                                                                                                                                                                                                             
          default:                                                                                                                                                                                                                                             
            break;                                                                                                                                                                                                                                             
        }                                                                                                                                                                                                                                                      
        if (searchValue.length > 4) {                                                                                                                                                                                                                          
          this.getView().setBusy(true);                                                                                                                                                                                                                        
          // Read the data from OData service                                                                                                                                                                                                                  
          this.getOwnerComponent()                                                                                                                                                                                                                             
            .getModel()                                                                                                                                                                                                                                        
            .read(                                                                                                                                                                                                                                             
              // "/MusteriHeaderSet('" + searchValue + "')/MusteriHeaderToItemNav",                                                                                                                                                                            
              "/MusteriHeaderSet(TcVergino='" +                                                                                                                                                                                                                
                TcVergino +                                                                                                                                                                                                                                    
                "',Adi='" +                                                                                                                                                                                                                                    
                Ad +                                                                                                                                                                                                                                           
                "',Telefon='" +                                                                                                                                                                                                                                
                Telefon +                                                                                                                                                                                                                                      
                "')/MusteriHeaderToItemNav",                                                                                                                                                                                                                   
              {                                                                                                                                                                                                                                                
                success: function (oData) {                                                                                                                                                                                                                    
                  musteriArray = oData.results;                                                                                                                                                                                                                
                                                                                                                                                                                                                                                               
                  this.getOwnerComponent()                                                                                                                                                                                                                     
                    .getModel("MusteriSet")                                                                                                                                                                                                                    
                    .setProperty("/", {                                                                                                                                                                                                                        
                      musteriArray,                                                                                                                                                                                                                            
                    });                                                                                                                                                                                                                                        
                  this.getView().setBusy(false);                                                                                                                                                                                                               
                  this.getView().byId("idSearchName").setValue("");                                                                                                                                                                                            
                  this.getView().byId("idSearchTc").setValue("");                                                                                                                                                                                              
                  this.getView().byId("idSearchTel").setValue("");                                                                                                                                                                                             
                  this.fragmentLaden();                                                                                                                                                                                                                        
                }.bind(this),                                                                                                                                                                                                                                  
                error: function (error) {                                                                                                                                                                                                                      
                  MessageBox.error("Error occurred: " + error.responseText);                                                                                                                                                                                   
                  this.getView().setBusy(false);                                                                                                                                                                                                               
                },                                                                                                                                                                                                                                             
              }                                                                                                                                                                                                                                                
            );                                                                                                                                                                                                                                                 
          this.getView().setBusy(false);                                                                                                                                                                                                                       
        }                                                                                                                                                                                                                                                      
      },                                                                                                                                                                                                                                                       
      fragmentLaden: async function () {                                                                                                                                                                                                                       
        // create dialog lazily                                                                                                                                                                                                                                
        this.oDialog ??= await this.loadFragment({                                                                                                                                                                                                             
          name: "test.fragments.musteri",                                                                                                                                                                                                                      
        });                                                                                                                                                                                                                                                    
        var oGlobalJSONModel = this.getView().getModel("MusteriSet");                                                                                                                                                                                          
        this.oDialog.setModel(oGlobalJSONModel, "MusteriSet");                                                                                                                                                                                                 
        this.oDialog.bindElement({                                                                                                                                                                                                                             
          path: "/",                                                                                                                                                                                                                                           
        });                                                                                                                                                                                                                                                    
        this.oDialog.open();                                                                                                                                                                                                                                   
      },                                                                                                                                                                                                                                                       
      onCloseButtonPress: function () {                                                                                                                                                                                                                        
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;                                                                                                                                                                                                               
        var oModelSepet = this.getOwnerComponent().getModel("AddBasket");                                                                                                                                                                                      
        if (typeof musteri === "undefined") {                                                                                                                                                                                                                  
          MessageBox.information(                                                                                                                                                                                                                              
            this.getMessageFromi18n("plsCreateaCustomer") //"MÃ¼Återi oluÅturuldu."                                                                                                                                                                          
          );                                                                                                                                                                                                                                                   
          oModelSepet.setProperty("/updateEnable", false);                                                                                                                                                                                                     
          oModelSepet.setProperty("/createEnable", true);                                                                                                                                                                                                      
          // this.fragmentInputClean();                                                                                                                                                                                                                        
          this.oDialog.close();                                                                                                                                                                                                                                
        } else {                                                                                                                                                                                                                                               
          //! wizard step open;                                                                                                                                                                                                                                
          // this.getView().byId("idClientCre").setEnabled(false);                                                                                                                                                                                             
          // this.getView().byId("idClientUpd").setEnabled(true);                                                                                                                                                                                              
          oModelSepet.setProperty("/updateEnable", true);                                                                                                                                                                                                      
          oModelSepet.setProperty("/createEnable", false);                                                                                                                                                                                                     
          this._wizard.setCurrentStep(this.byId("ProductInfoStep"));                                                                                                                                                                                           
          this._wizard.validateStep(this.byId("ProductInfoStep"));                                                                                                                                                                                             
          // this.fragmentInputClean();                                                                                                                                                                                                                        
          this.oDialog.close();                                                                                                                                                                                                                                
        }                                                                                                                                                                                                                                                      
      },                                                                                                                                                                                                                                                       
      onCloseMusteriButtonPress: function () {                                                                                                                                                                                                                 
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;                                                                                                                                                                                                                     
        var oModelSepet = this.getOwnerComponent().getModel("AddBasket");                                                                                                                                                                                      
        if (typeof musteri === "undefined") {                                                                                                                                                                                                                  
          MessageBox.information(                                                                                                                                                                                                                              
            this.getMessageFromi18n("plsCreateaCustomer") //"MÃ¼Återi oluÅturuldu."                                                                                                                                                                          
          );                                                                                                                                                                                                                                                   
          oModelSepet.setProperty("/updateEnable", false);                                                                                                                                                                                                     
          oModelSepet.setProperty("/createEnable", true);                                                                                                                                                                                                      
          this.fragmentInputClean();                                                                                                                                                                                                                           
          this.musteriCreateDialog.close();                                                                                                                                                                                                                    
        }else{                                                                                                                                                                                                                                                 
          this.musteriCreateDialog.close();                                                                                                                                                                                                                    
        }                                                                                                                                                                                                                                                      
      },                                                                                                                                                                                                                                                       
      //! ana ekran musteri create butonu                                                                                                                                                                                                                      
      handleCreateClient: async function () {                                                                                                                                                                                                                  
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;                                                                                                                                                                                                               
        var oModelSepet = this.getOwnerComponent().getModel("AddBasket");                                                                                                                                                                                      
        oModelSepet.setProperty("/UpdateKisi", true);                                                                                                                                                                                                          
        this.musteriCreateDialog ??= await this.loadFragment({                                                                                                                                                                                                 
          name: "test.fragments.musteriCreate",                                                                                                                                                                                                                
        });                                                                                                                                                                                                                                                    
        var button = this.musteriCreateDialog.getButtons()[0];                                                                                                                                                                                                 
        button.setText(this.getMessageFromi18n("createCustomerText")); //"Musteri GÃ¼ncelle"                                                                                                                                                                   
        this.musteriCreateDialog.open();                                                                                                                                                                                                                       
      },                                                                                                                                                                                                                                                       
                                                                                                                                                                                                                                                               
      //! ana ekran mÃ¼sreri gÃ¼ncelle butonu                                                                                                                                                                                                                  
      handleUpdateClient: async function () {                                                                                                                                                                                                                  
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;                                                                                                                                                                                                                           
        var oModelSepet = this.getOwnerComponent().getModel("AddBasket");                                                                                                                                                                                      
        oModelSepet.setProperty("/UpdateKisi", false);                                                                                                                                                                                                         
        var searchFieldTc = "";                                                                                                                                                                                                                                
        var searchFieldTel = "";                                                                                                                                                                                                                               
        var musteriId = musteri.No;                                                                                                                                                                                                                            
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;                                                                                                                                                                                                                           
        //  ("/MusteriHeaderSet(TcVergino='"+searchFieldTel+"',Adi='"+ searchFieldAd+"',Telefon='"+searchFieldTel+"')                                                                                                                                          
        this.getOwnerComponent()                                                                                                                                                                                                                               
          .getModel()                                                                                                                                                                                                                                          
          // .read("/MusteriHeaderSet('" + musteri.musteriNo + "')", {                                                                                                                                                                                         
          .read(                                                                                                                                                                                                                                               
            "/MusteriHeaderSet(TcVergino='" +                                                                                                                                                                                                                  
              searchFieldTc +                                                                                                                                                                                                                                  
              "',Adi='" +                                                                                                                                                                                                                                      
              musteriId +                                                                                                                                                                                                                                      
              "',Telefon='" +                                                                                                                                                                                                                                  
              searchFieldTel +                                                                                                                                                                                                                                 
              "')",                                                                                                                                                                                                                                            
            {                                                                                                                                                                                                                                                  
              success: function (data) {                                                                                                                                                                                                                       
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;                                                                                                                                                                                             
                this.getView().setBusy(true);                                                                                                                                                                                                                  
                var customer = data;                                                                                                                                                                                                                           
                this.getView().byId("nameInputfr").setValue(customer.Adi);                                                                                                                                                                                     
                this.getView().byId("name2Inputfr").setValue(customer.Soyadi);                                                                                                                                                                                 
                this.getView().byId("ortInputfr").setValue(customer.Il);                                                                                                                                                                                       
                this.getView().byId("ort2Inputfr").setValue(customer.Ilce);                                                                                                                                                                                    
                this.getView()                                                                                                                                                                                                                                 
                  .byId("pstlzInputfr")                                                                                                                                                                                                                        
                  .setValue(customer.PostaKodu);                                                                                                                                                                                                               
                this.getView().byId("sokakNofr").setValue(customer.No);                                                                                                                                                                                        
                this.getView().byId("telfInputfr").setValue(customer.Telefon);                                                                                                                                                                                 
                this.getView().byId("strasInputfr").setValue(customer.Sokak);                                                                                                                                                                                  
                this.getView()                                                                                                                                                                                                                                 
                  .byId("mahalleInputfr")                                                                                                                                                                                                                      
                  .setValue(customer.Mahalle);                                                                                                                                                                                                                 
                this.getView().byId("emailInputfr").setValue(customer.Email);                                                                                                                                                                                  
                var Name = customer.Adi + " " + customer.Soyadi;                                                                                                                                                                                               
                customer.Name = Name;                                                                                                                                                                                                                          
                var Adress =                                                                                                                                                                                                                                   
                  customer.Mahalle +                                                                                                                                                                                                                           
                  " " +                                                                                                                                                                                                                                        
                  customer.Sokak +                                                                                                                                                                                                                             
                  " " +                                                                                                                                                                                                                                        
                  customer.No +                                                                                                                                                                                                                                
                  " " +                                                                                                                                                                                                                                        
                  customer.Ilce +                                                                                                                                                                                                                              
                  " " +                                                                                                                                                                                                                                        
                  customer.Il;                                                                                                                                                                                                                                 
                customer.Adres = Adress;                                                                                                                                                                                                                       
                this.getOwnerComponent()                                                                                                                                                                                                                       
                  .getModel("AddBasket")                                                                                                                                                                                                                       
                  .setProperty("/customerInfo", customer);                                                                                                                                                                                                     
                  this._wizard.validateStep(this.byId("ProductInfoStep"));                                                                                                                                                                                     
                this.getView().setBusy(false);                                                                                                                                                                                                                 
              }.bind(this),                                                                                                                                                                                                                                    
              error: function (error) {                                                                                                                                                                                                                        
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;                                                                                                                                                                           
                MessageBox.error("Error occurred: " + error.responseText);                                                                                                                                                                                     
                // Display an error message or perform error handling logic                                                                                                                                                                                    
              },                                                                                                                                                                                                                                               
            }                                                                                                                                                                                                                                                  
          );                                                                                                                                                                                                                                                   
        this.musteriCreateDialog ??= await this.loadFragment({                                                                                                                                                                                                 
          name: "test.fragments.musteriCreate",                                                                                                                                                                                                                
        });                                                                                                                                                                                                                                                    
        var button = this.musteriCreateDialog.getButtons()[0];                                                                                                                                                                                                 
        button.setText(this.getMessageFromi18n("updateCustomerText")); //"Musteri GÃ¼ncelle"                                                                                                                                                                   
        // this._wizard.validateStep(this.byId("ProductInfoStep"));                                                                                                                                                                                            
        // this._wizard.setCurrentStep(this.byId("ProductInfoStep"));                                                                                                                                                                                          
                                                                                                                                                                                                                                                               
                                                                                                                                                                                                                                                               
        this.getView().setBusy(false);                                                                                                                                                                                                                         
        this.musteriCreateDialog.open();                                                                                                                                                                                                                       
      },                                                                                                                                                                                                                                                       
      musteriEklePress: function () {                                                                                                                                                                                                                          
        this._wizard.validateStep(this.byId("ProductInfoStep"));                                                                                                                                                                                               
        this._wizard.setCurrentStep(this.byId("ProductInfoStep"));                                                                                                                                                                                             
        var oModelSepet = this.getOwnerComponent().getModel("AddBasket");                                                                                                                                                                                      
        if (musteri) {                                                                                                                                                                                                                                         
          oModelSepet.setProperty("/customerInfo", musteri);                                                                                                                                                                                                   
                                                                                                                                                                                                                                                               
          oModelSepet.setProperty("/updateEnable", true);                                                                                                                                                                                                      
          oModelSepet.setProperty("/createEnable", false);                                                                                                                                                                                                     
          this.getView().byId("idMusteriName").setText(musteri.Adi);                                                                                                                                                                                           
          this.getView().byId("idMusteriTel").setText(musteri.Telefon);                                                                                                                                                                                        
          this.getView().byId("idMusteriOrt").setText(musteri.Adres);                                                                                                                                                                                          
          this.getView().byId("idMusteriEmail").setText(musteri.Email);                                                                                                                                                                                        
          this.getView().byId("idMusteriNo").setText(musteri.No);                                                                                                                                                                                              
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;                                                                                                                                                                                                   
          this._wizard.validateStep(this.byId("ProductInfoStep"));                                                                                                                                                                                             
        } else {                                                                                                                                                                                                                                               
          oModelSepet.setProperty("/updateEnable", false);                                                                                                                                                                                                     
          oModelSepet.setProperty("/createEnable", true);                                                                                                                                                                                                      
          // this.getView().byId("idClientCre").setEnabled(true);                                                                                                                                                                                              
          // this.getView().byId("idClientUpd").setEnabled(false);                                                                                                                                                                                             
        }                                                                                                                                                                                                                                                      
        this.onCloseButtonPress();                                                                                                                                                                                                                             
      },                                                                                                                                                                                                                                                       
      musteriOlusturPress: function () {                                                                                                                                                                                                                       
        var oModelSepet = this.getOwnerComponent().getModel("AddBasket");                                                                                                                                                                                      
        var currentDate = new Date();                                                                                                                                                                                                                          
        var formattedDate = currentDate.toISOString().replace(/[-T:.Z]/g, "");                                                                                                                                                                                 
        oModelSepet.setProperty("/allfine", true);                                                                                                                                                                                                             
        var name1 = this.getView().byId("nameInputfr").getValue();                                                                                                                                                                                             
        var name2 = this.getView().byId("name2Inputfr").getValue();                                                                                                                                                                                            
        var ort01 = this.getView().byId("ortInputfr").getValue();                                                                                                                                                                                              
        var ort2 = this.getView().byId("ort2Inputfr").getValue();                                                                                                                                                                                              
        var pstlz = this.getView().byId("pstlzInputfr").getValue();                                                                                                                                                                                            
        var stras = this.getView().byId("strasInputfr").getValue();                                                                                                                                                                                            
        var mahalle = this.getView().byId("mahalleInputfr").getValue();                                                                                                                                                                                        
        var strasNo = this.getView().byId("sokakNofr").getValue();                                                                                                                                                                                             
        var telf1 = this.getView().byId("telfInputfr").getValue();                                                                                                                                                                                             
        var zzemail = this.getView().byId("emailInputfr").getValue();                                                                                                                                                                                          
        var gercekKisi = oModelSepet.getProperty("/GercekKisi");                                                                                                                                                                                               
&nbsp;&nbsp;                                                                                                                                                                                                                                                   
        this.getView().setBusy(true);                                                                                                                                                                                                                          
        this.onValidateEmail();                                                                                                                                                                                                                                
        this.onValidateCity();                                                                                                                                                                                                                                 
        this.onValidatePost();                                                                                                                                                                                                                                 
        this.onValidateName();                                                                                                                                                                                                                                 
        this.onValidateLastName();                                                                                                                                                                                                                             
        this.getView().setBusy(false);                                                                                                                                                                                                                         
                                                                                                                                                                                                                                                               
        var allFine = oModelSepet.getProperty("/allfine");                                                                                                                                                                                                     
        // ! Email kontrol                                                                                                                                                                                                                                     
        if (allFine === true) {                                                                                                                                                                                                                                
          var button = this.musteriCreateDialog.getButtons()[0];                                                                                                                                                                                               
          if (                                                                                                                                                                                                                                                 
            button.getText() === this.getMessageFromi18n("updateCustomerText")                                                                                                                                                                                 
          ) {                                                                                                                                                                                                                                                  
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;                                                                                                                                                                                       
            oModelSepet.setProperty("/UpdateKisi", false);                                                                                                                                                                                                     
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;                                                                                                                                                                                                                           
            var updateMusteri = {                                                                                                                                                                                                                              
              // MusteriNo: musteri.No,                                                                                                                                                                                                                        
              // GercekKisi: gercekKisi,                                                                                                                                                                                                                       
              MusteriNo: musteri.No,                                                                                                                                                                                                                           
              Adi: name1,                                                                                                                                                                                                                                      
              Soyadi: name2,                                                                                                                                                                                                                                   
              Il: ort01,                                                                                                                                                                                                                                       
              Ilce: ort2,                                                                                                                                                                                                                                      
              PostaKodu: pstlz,                                                                                                                                                                                                                                
              Sokak: stras,                                                                                                                                                                                                                                    
              Mahalle: mahalle,                                                                                                                                                                                                                                
              No: strasNo,                                                                                                                                                                                                                                     
              Telefon: telf1,                                                                                                                                                                                                                                  
              Email: zzemail,                                                                                                                                                                                                                                  
            };                                                                                                                                                                                                                                                 
            //"MÃ¼steri GÃ¼ncelle"                                                                                                                                                                                                                             
            // this.emailValidations(zzemail,allFine);                                                                                                                                                                                                         
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;                                                                                                                                                                                                   
            this.getOwnerComponent()                                                                                                                                                                                                                           
              .getModel()                                                                                                                                                                                                                                      
              .create("/MusteriHeaderSet", updateMusteri, {                                                                                                                                                                                                    
                success: function (data) {                                                                                                                                                                                                                     
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;                                                                                                                                                                           
                  MessageBox.success(                                                                                                                                                                                                                          
                    this.getMessageFromi18n("messageCustomerUpdatedsuccess")                                                                                                                                                                                   
                  ); //"MÃ¼Återi gÃ¼ncellendi."                                                                                                                                                                                                               
                  this.fragmentInputClean();                                                                                                                                                                                                                   
                  this.musteriCreateDialog.close();                                                                                                                                                                                                            
                  this.getView()                                                                                                                                                                                                                               
                    .byId("idMusteriName")                                                                                                                                                                                                                     
                    .setText(updateMusteri.Adi + " " + updateMusteri.Soyadi);                                                                                                                                                                                  
                  this.getView()                                                                                                                                                                                                                               
                    .byId("idMusteriTel")                                                                                                                                                                                                                      
                    .setText(updateMusteri.Telefon);                                                                                                                                                                                                           
                  this.getView()                                                                                                                                                                                                                               
                    .byId("idMusteriOrt")                                                                                                                                                                                                                      
                    .setText(                                                                                                                                                                                                                                  
                      updateMusteri.Mahalle +                                                                                                                                                                                                                  
                        " " +                                                                                                                                                                                                                                  
                        updateMusteri.Sokak +                                                                                                                                                                                                                  
                        " " +                                                                                                                                                                                                                                  
                        updateMusteri.No +                                                                                                                                                                                                                     
                        " " +                                                                                                                                                                                                                                  
                        updateMusteri.Ilce +                                                                                                                                                                                                                   
                        " " +                                                                                                                                                                                                                                  
                        updateMusteri.Il                                                                                                                                                                                                                       
                    );                                                                                                                                                                                                                                         
                  this.getView()                                                                                                                                                                                                                               
                    .byId("idMusteriEmail")                                                                                                                                                                                                                    
                    .setText(updateMusteri.Email);                                                                                                                                                                                                             
                  this.getView()                                                                                                                                                                                                                               
                    .byId(" musteri.No")                                                                                                                                                                                                                       
                    .setText(musteri.No);                                                                                                                                                                                                                      
                                                                                                                                                                                                                                                               
                  this._wizard.validateStep(this.byId("ProductInfoStep"));                                                                                                                                                                                     
                }.bind(this),                                                                                                                                                                                                                                  
                error: function (error) {                                                                                                                                                                                                                      
                  // Handle error response                                                                                                                                                                                                                     
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;                                                                                                                                                               
                  MessageBox.error("Error occurred: " + error.responseText);                                                                                                                                                                                   
                },                                                                                                                                                                                                                                             
              });                                                                                                                                                                                                                                              
          } else {                                                                                                                                                                                                                                             
            oModelSepet.setProperty("/UpdateKisi", true);                                                                                                                                                                                                      
            yeniMusteri = {                                                                                                                                                                                                                                    
              GercekKisi: gercekKisi,                                                                                                                                                                                                                          
              Adi: name1,                                                                                                                                                                                                                                      
              Soyadi: name2,                                                                                                                                                                                                                                   
              Il: ort01,                                                                                                                                                                                                                                       
              Ilce: ort2,                                                                                                                                                                                                                                      
              PostaKodu: pstlz,                                                                                                                                                                                                                                
              Sokak: stras,                                                                                                                                                                                                                                    
              Mahalle: mahalle,                                                                                                                                                                                                                                
              No: strasNo,                                                                                                                                                                                                                                     
              Telefon: telf1,                                                                                                                                                                                                                                  
              Email: zzemail,                                                                                                                                                                                                                                  
            };                                                                                                                                                                                                                                                 
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;                                                                                                                                                                                                                           
            this.getOwnerComponent()                                                                                                                                                                                                                           
              .getModel()                                                                                                                                                                                                                                      
              .create("/MusteriHeaderSet", yeniMusteri, {                                                                                                                                                                                                      
                success: function (data) {                                                                                                                                                                                                                     
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;                                                                                                                                                                           
                  musteri = data;                                                                                                                                                                                                                              
                  musteri.No = data.MusteriNo;                                                                                                                                                                                                                 
                  var simkey = musteri.No + formattedDate;                                                                                                                                                                                                     
                  var simkey2 = musteri.No + "_" + currentDate;                                                                                                                                                                                                
                  oModelSepet.setProperty("/Simkey", simkey);                                                                                                                                                                                                  
                  oModelSepet.setProperty("/Simkey2", simkey2);                                                                                                                                                                                                
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;                                                                                                                                                                     
                  this.getView()                                                                                                                                                                                                                               
                    .byId("idMusteriName")                                                                                                                                                                                                                     
                    .setText(yeniMusteri.Adi + " " + yeniMusteri.Soyadi);                                                                                                                                                                                      
                  this.getView()                                                                                                                                                                                                                               
                    .byId("idMusteriTel")                                                                                                                                                                                                                      
                    .setText(yeniMusteri.Telefon);                                                                                                                                                                                                             
                  this.getView()                                                                                                                                                                                                                               
                    .byId("idMusteriOrt")                                                                                                                                                                                                                      
                    .setText(                                                                                                                                                                                                                                  
                      yeniMusteri.Il +                                                                                                                                                                                                                         
                        " " +                                                                                                                                                                                                                                  
                        yeniMusteri.Ilce +                                                                                                                                                                                                                     
                        " " +                                                                                                                                                                                                                                  
                        yeniMusteri.Mahalle +                                                                                                                                                                                                                  
                        " " +                                                                                                                                                                                                                                  
                        yeniMusteri.Sokak +                                                                                                                                                                                                                    
                        " " +                                                                                                                                                                                                                                  
                        yeniMusteri.No                                                                                                                                                                                                                         
                    );                                                                                                                                                                                                                                         
                  this.getView()                                                                                                                                                                                                                               
                    .byId("idMusteriEmail")                                                                                                                                                                                                                    
                    .setText(yeniMusteri.Email);                                                                                                                                                                                                               
                  this.getView()                                                                                                                                                                                                                               
                    .byId("idMusteriNo")                                                                                                                                                                                                                       
                    .setText( musteri.No);                                                                                                                                                                                                                     
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;                                                                                                                                       
                  var Name = musteri.Adi + " " + musteri.Soyadi;                                                                                                                                                                                               
                  musteri.Name = Name;                                                                                                                                                                                                                         
                  var Adres =                                                                                                                                                                                                                                  
                    musteri.Mahalle +                                                                                                                                                                                                                          
                    " " +                                                                                                                                                                                                                                      
                    musteri.Sokak +                                                                                                                                                                                                                            
                    " " +                                                                                                                                                                                                                                      
                    musteri.No +                                                                                                                                                                                                                               
                    " " +                                                                                                                                                                                                                                      
                    musteri.Ilce +                                                                                                                                                                                                                             
                    " " +                                                                                                                                                                                                                                      
                    musteri.Il;                                                                                                                                                                                                                                
                  musteri.Adres = Adres;                                                                                                                                                                                                                       
                  oModelSepet.setProperty("/customerInfo", musteri);                                                                                                                                                                                           
                  oModelSepet.setProperty("/updateEnable", true);                                                                                                                                                                                              
                  oModelSepet.setProperty("/createEnable", false);                                                                                                                                                                                             
                  MessageBox.success(                                                                                                                                                                                                                          
                    this.getMessageFromi18n("messageCustomerCreatedsuccess") //"MÃ¼Återi oluÅturuldu."                                                                                                                                                       
                  );                                                                                                                                                                                                                                           
                                                                                                                                                                                                                                                               
                  this.fragmentInputClean();                                                                                                                                                                                                                   
                  this.musteriCreateDialog.close();                                                                                                                                                                                                            
                  this._wizard.validateStep(this.byId("ProductInfoStep"));                                                                                                                                                                                     
                }.bind(this),                                                                                                                                                                                                                                  
              });                                                                                                                                                                                                                                              
          }                                                                                                                                                                                                                                                    
        } else {                                                                                                                                                                                                                                               
          // MessageBox.error(this.getMessageFromi18n("messagefillAllfields")); //"BÃ¼tÃ¼n alanlarÄ± girmediniz"                                                                                                                                               
        }                                                                                                                                                                                                                                                      
      },                                                                                                                                                                                                                                                       
      fragmentInputClean: function () {                                                                                                                                                                                                                        
        var oModelSepet = this.getOwnerComponent().getModel("AddBasket");                                                                                                                                                                                      
        oModelSepet.setProperty("/GercekKisi", false);                                                                                                                                                                                                         
        this.getView().byId("nameInputfr").setValue("");                                                                                                                                                                                                       
        this.getView().byId("name2Inputfr").setValue("");                                                                                                                                                                                                      
        this.getView().byId("ortInputfr").setValue("");                                                                                                                                                                                                        
        this.getView().byId("ort2Inputfr").setValue("");                                                                                                                                                                                                       
        this.getView().byId("pstlzInputfr").setValue("");                                                                                                                                                                                                      
        this.getView().byId("strasInputfr").setValue("");                                                                                                                                                                                                      
        this.getView().byId("mahalleInputfr").setValue("");                                                                                                                                                                                                    
        this.getView().byId("sokakNofr").setValue("");                                                                                                                                                                                                         
        this.getView().byId("telfInputfr").setValue("");                                                                                                                                                                                                       
        this.getView().byId("emailInputfr").setValue("");                                                                                                                                                                                                      
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;                                                                                                                                                                                                               
      },                                                                                                                                                                                                                                                       
      onValidateEmail: function () {                                                                                                                                                                                                                           
        var oModelSepet = this.getOwnerComponent().getModel("AddBasket");                                                                                                                                                                                      
        var allFine = oModelSepet.getProperty("/allfine");                                                                                                                                                                                                     
                                                                                                                                                                                                                                                               
        var zzemail = this.getView().byId("emailInputfr").getValue();                                                                                                                                                                                          
                                                                                                                                                                                                                                                               
        if (zzemail === "") {                                                                                                                                                                                                                                  
          oModelSepet.setProperty("/allfine", false);                                                                                                                                                                                                          
          allFine = false;                                                                                                                                                                                                                                     
          this.getView().byId("emailInputfr").setValueState("Error");                                                                                                                                                                                          
          this.getView()                                                                                                                                                                                                                                       
            .byId("emailInputfr")                                                                                                                                                                                                                              
            .setValueStateText(this.getMessageFromi18n("mandatoryFieldEmail"));                                                                                                                                                                                
          MessageBox.error(this.getMessageFromi18n("mandatoryFieldEmail"));                                                                                                                                                                                    
          // "MÃ¼Återi E-postasÄ± zorunludur, lÃ¼tfen doldurun"                                                                                                                                                                                               
        } else {                                                                                                                                                                                                                                               
          this.getView().byId("emailInputfr").setValueState("None");                                                                                                                                                                                           
                                                                                                                                                                                                                                                               
          // E-posta formatÄ± kontrolÃ¼                                                                                                                                                                                                                        
          var empEmailRegExp =                                                                                                                                                                                                                                 
            /^(([^<>()[\]\\.,;:\s@\"]+(\.[^<>()[\]\\.,;:\s@\"]+)*)|(\".+\"))@(([^<>()[\]\\.,;:\s@\"]+\.)+[^<>()[\]\\.,;:\s@\"]{2,})$/i;                                                                                                                        
          if (!zzemail.match(empEmailRegExp)) {                                                                                                                                                                                                                
            this.getView().byId("emailInputfr").setValueState("Error");                                                                                                                                                                                        
            this.getView()                                                                                                                                                                                                                                     
              .byId("emailInputfr")                                                                                                                                                                                                                            
              .setValueStateText(                                                                                                                                                                                                                              
                this.getMessageFromi18n("emailStandardMessage")                                                                                                                                                                                                
              );                                                                                                                                                                                                                                               
            MessageBox.error(this.getMessageFromi18n("emailStandardMessage")); // "MÃ¼Återi E-postasÄ± sadece e-posta standartÄ±na uygun olmalÄ±dÄ±r."                                                                                                        
            oModelSepet.setProperty("/allfine", false);                                                                                                                                                                                                        
            allFine = false;                                                                                                                                                                                                                                   
          }                                                                                                                                                                                                                                                    
        }                                                                                                                                                                                                                                                      
      },                                                                                                                                                                                                                                                       
      onValidateCity: function () {                                                                                                                                                                                                                            
&nbsp;&nbsp;&nbsp;                                                                                                                                                                                                                                             
        var ort01 = this.getView().byId("ortInputfr").getValue();                                                                                                                                                                                              
        var oModelSepet = this.getOwnerComponent().getModel("AddBasket");                                                                                                                                                                                      
        if (ort01 === "") {                                                                                                                                                                                                                                    
          oModelSepet.setProperty("/allfine", false);                                                                                                                                                                                                          
          this.getView().byId("ortInputfr").setValueState("Error");                                                                                                                                                                                            
          this.getView()                                                                                                                                                                                                                                       
            .byId("ortInputfr")                                                                                                                                                                                                                                
            .setValueStateText(this.getMessageFromi18n("mandatoryFieldCity"));                                                                                                                                                                                 
        } else {                                                                                                                                                                                                                                               
          this.getView().byId("ortInputfr").setValueState("None");                                                                                                                                                                                             
        }                                                                                                                                                                                                                                                      
      },                                                                                                                                                                                                                                                       
      onValidateName: function () {                                                                                                                                                                                                                            
        var name1 = this.getView().byId("nameInputfr").getValue();                                                                                                                                                                                             
        var oModelSepet = this.getOwnerComponent().getModel("AddBasket");                                                                                                                                                                                      
        if (name1 === "") {                                                                                                                                                                                                                                    
          oModelSepet.setProperty("/allfine", false);                                                                                                                                                                                                          
          this.getView().byId("nameInputfr").setValueState("Error");                                                                                                                                                                                           
          this.getView()                                                                                                                                                                                                                                       
            .byId("nameInputfr")                                                                                                                                                                                                                               
            .setValueStateText(this.getMessageFromi18n("mandatoryFieldCity"));                                                                                                                                                                                 
        } else {                                                                                                                                                                                                                                               
          this.getView().byId("nameInputfr").setValueState("None");                                                                                                                                                                                            
        }                                                                                                                                                                                                                                                      
      },                                                                                                                                                                                                                                                       
      onValidateLastName: function () {                                                                                                                                                                                                                        
        var name2 = this.getView().byId("name2Inputfr").getValue();                                                                                                                                                                                            
        var oModelSepet = this.getOwnerComponent().getModel("AddBasket");                                                                                                                                                                                      
        if (name2 === "") {                                                                                                                                                                                                                                    
          oModelSepet.setProperty("/allfine", false);                                                                                                                                                                                                          
          this.getView().byId("name2Inputfr").setValueState("Error");                                                                                                                                                                                          
          this.getView()                                                                                                                                                                                                                                       
            .byId("name2Inputfr")                                                                                                                                                                                                                              
            .setValueStateText(this.getMessageFromi18n("mandatoryFieldCity"));                                                                                                                                                                                 
        } else {                                                                                                                                                                                                                                               
          this.getView().byId("name2Inputfr").setValueState("None");                                                                                                                                                                                           
        }                                                                                                                                                                                                                                                      
      },                                                                                                                                                                                                                                                       
      onValidatePost: function () {                                                                                                                                                                                                                            
        var pstlz = this.getView().byId("pstlzInputfr").getValue();                                                                                                                                                                                            
        var oModelSepet = this.getOwnerComponent().getModel("AddBasket");                                                                                                                                                                                      
        var postcodeRegExp = /^\d{5}$/; // 5 haneli posta kodu iÃ§in Ã¶rnek regex                                                                                                                                                                              
        if (pstlz === "") {                                                                                                                                                                                                                                    
          oModelSepet.setProperty("/allfine", false);                                                                                                                                                                                                          
          this.getView().byId("pstlzInputfr").setValueState("Error");                                                                                                                                                                                          
          this.getView()                                                                                                                                                                                                                                       
            .byId("pstlzInputfr")                                                                                                                                                                                                                              
            .setValueStateText(                                                                                                                                                                                                                                
              this.getMessageFromi18n("mandatoryFieldPostcode")                                                                                                                                                                                                
            );                                                                                                                                                                                                                                                 
        } else if (!pstlz.match(postcodeRegExp)) {                                                                                                                                                                                                             
          oModelSepet.setProperty("/allfine", false);                                                                                                                                                                                                          
          this.getView().byId("pstlzInputfr").setValueState("Error");                                                                                                                                                                                          
          this.getView()                                                                                                                                                                                                                                       
            .byId("pstlzInputfr")                                                                                                                                                                                                                              
            .setValueStateText(                                                                                                                                                                                                                                
              this.getMessageFromi18n("invalidPostcodeMessage")                                                                                                                                                                                                
            );                                                                                                                                                                                                                                                 
        } else {                                                                                                                                                                                                                                               
          this.getView().byId("pstlzInputfr").setValueState("None");                                                                                                                                                                                           
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;                                                                                                                                                                                                         
        }                                                                                                                                                                                                                                                      
      },                                                                                                                                                                                                                                                       
                                                                                                                                                                                                                                                               
      //! select ile  sonra musteri secme                                                                                                                                                                                                                      
      musteriTableSelectionChange: function (oEvent) {                                                                                                                                                                                                         
        var oModelSepet = this.getOwnerComponent().getModel("AddBasket");                                                                                                                                                                                      
        var oTable = this.oView.byId("tab2");                                                                                                                                                                                                                  
        var oRow = oTable.getSelectedItems();                                                                                                                                                                                                                  
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;                                                                                                                                                                                                                     
        var currentDate = new Date();                                                                                                                                                                                                                          
        var Sipkey = "SIPKEY_" + currentDate.getTime();                                                                                                                                                                                                        
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;                                                                                                                                                                                                               
        musteri = {                                                                                                                                                                                                                                            
          No: oRow[0].mAggregations.cells[0].mProperties.text,                                                                                                                                                                                                 
          Adi: oRow[0].mAggregations.cells[1].mProperties.text,                                                                                                                                                                                                
          Telefon: oRow[0].mAggregations.cells[2].mProperties.text,                                                                                                                                                                                            
          Adres: oRow[0].mAggregations.cells[3].mProperties.text,                                                                                                                                                                                              
          Email: oRow[0].mAggregations.cells[4].mProperties.text,                                                                                                                                                                                              
          Sipkey: Sipkey,                                                                                                                                                                                                                                      
        };                                                                                                                                                                                                                                                     
        var currentDate = new Date();                                                                                                                                                                                                                          
        var simkey = musteri.No + currentDate.getTime();                                                                                                                                                                                                       
        var simkey2 = musteri.No + "_" + currentDate.getTime();                                                                                                                                                                                                
        oModelSepet.setProperty("/Simkey", simkey);                                                                                                                                                                                                            
        oModelSepet.setProperty("/Simkey2", simkey2);                                                                                                                                                                                                          
        this.musteriEklePress();                                                                                                                                                                                                                               
        oTable.removeSelections(true);                                                                                                                                                                                                                         
      },                                                                                                                                                                                                                                                       
      odemeSekli: function (oEvent) {                                                                                                                                                                                                                          
        var selectedPaymentIndex = oEvent.getParameter("selectedIndex");                                                                                                                                                                                       
        var selectedPaymentMethod;                                                                                                                                                                                                                             
                                                                                                                                                                                                                                                               
        if (                                                                                                                                                                                                                                                   
          selectedPaymentIndex !== undefined &&                                                                                                                                                                                                                
          selectedPaymentIndex !== null                                                                                                                                                                                                                        
        ) {                                                                                                                                                                                                                                                    
          var radioButtonGroup = this.byId("idPaymentMethod");                                                                                                                                                                                                 
          var selectedButton =                                                                                                                                                                                                                                 
            radioButtonGroup.getButtons()[selectedPaymentIndex];                                                                                                                                                                                               
          selectedPaymentMethod = selectedButton.getId().split("--").pop();                                                                                                                                                                                    
        }                                                                                                                                                                                                                                                      
        // SeÃ§ilen Ã¶deme yÃ¶ntemini kullanarak yapÄ±lacak iÅlemler                                                                                                                                                                                          
        switch (selectedPaymentMethod) {                                                                                                                                                                                                                       
          case "creditCard":                                                                                                                                                                                                                                   
            var krediKarti = this.getMessageFromi18n("krediKarti");                                                                                                                                                                                            
            // Kredi kartÄ± Ã¶deme seÃ§ildiÄinde yapÄ±lacak iÅlemler                                                                                                                                                                                         
            this.getOwnerComponent()                                                                                                                                                                                                                           
              .getModel("AddBasket")                                                                                                                                                                                                                           
              .setProperty("/odemeSekli", krediKarti);                                                                                                                                                                                                         
            this.getOwnerComponent()                                                                                                                                                                                                                           
              .getModel("AddBasket")                                                                                                                                                                                                                           
              .setProperty("/PaymentType", "2");                                                                                                                                                                                                               
                                                                                                                                                                                                                                                               
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;                                                                                                                                                                           
              this.handleDiscountSubmit();                                                                                                                                                                                                                     
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;                                                                                                                                                                                                   
                                                                                                                                                                                                                                                               
            break;                                                                                                                                                                                                                                             
          case "cash":                                                                                                                                                                                                                                         
            var nakit = this.getMessageFromi18n("nakit");                                                                                                                                                                                                      
            this.getOwnerComponent()                                                                                                                                                                                                                           
              .getModel("AddBasket")                                                                                                                                                                                                                           
              .setProperty("/odemeSekli", nakit);                                                                                                                                                                                                              
            this.getOwnerComponent()                                                                                                                                                                                                                           
              .getModel("AddBasket")                                                                                                                                                                                                                           
              .setProperty("/PaymentType", "1");                                                                                                                                                                                                               
              this.handleDiscountSubmit();                                                                                                                                                                                                                     
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;                                                                                                                                                                                             
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;                                                                                                                                                                                             
            break;                                                                                                                                                                                                                                             
          default:                                                                                                                                                                                                                                             
            break;                                                                                                                                                                                                                                             
        }                                                                                                                                                                                                                                                      
      },                                                                                                                                                                                                                                                       
      handleWizardCancel: function () {                                                                                                                                                                                                                        
        var messageText = this.getMessageFromi18n("messageCleanText");                                                                                                                                                                                         
                                                                                                                                                                                                                                                               
        this._handleMessageBoxOpenCancel(messageText, "warning");                                                                                                                                                                                              
        // this.onClearBasket();                                                                                                                                                                                                                               
      },                                                                                                                                                                                                                                                       
      handleWizardSubmit: function () {                                                                                                                                                                                                                        
        var messageText = this.getMessageFromi18n("messageConfirmText");                                                                                                                                                                                       
        this._handleMessageBoxOpen(messageText, "confirm");                                                                                                                                                                                                    
      },                                                                                                                                                                                                                                                       
      handleWizardPrint: async function () {                                                                                                                                                                                                                   
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;                                                                                                                                                                                                                     
        var url;                                                                                                                                                                                                                                               
        var oModelSepet = this.getOwnerComponent().getModel("AddBasket");                                                                                                                                                                                      
        var pdfKey = oModelSepet.getProperty("/vbeln");                                                                                                                                                                                                        
        var env = oModelSepet.getProperty("/Env");                                                                                                                                                                                                             
        var teklif = false;                                                                                                                                                                                                                                    
                                                                                                                                                                                                                                                               
        if (env === "DEV") {                                                                                                                                                                                                                                   
          url = "http://kolerpt.koleksiyon.mobilya:8000/sap/opu/odata/sap/ZSD_ODATA_KASA_SRV/SalesDocumentPdfSet(PdfKey='" + pdfKey + "',Teklif='" + teklif + "')/$value";                                                                                     
        } else if (env === "TEST") {                                                                                                                                                                                                                           
          url = "http://kolerpqa:8000/sap/opu/odata/sap/ZSD_ODATA_KASA_SRV/SalesDocumentPdfSet(PdfKey='" + pdfKey + "',Teklif='" + teklif + "')/$value";                                                                                                       
        } else {                                                                                                                                                                                                                                               
          console.log("Unknown Environment");                                                                                                                                                                                                                  
        };                                                                                                                                                                                                                                                     
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;                                                                                                                                                                                                               
        window.open(url);                                                                                                                                                                                                                                      
      },                                                                                                                                                                                                                                                       
      handleWizardOfferPrint: async function () {                                                                                                                                                                                                              
        var oModelSepet = this.getOwnerComponent().getModel("AddBasket");                                                                                                                                                                                      
        await this.handleDiscountSubmit();                                                                                                                                                                                                                     
                                                                                                                                                                                                                                                               
        await new Promise(resolve => setTimeout(resolve, 1000));                                                                                                                                                                                               
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;                                                                                                                                                                                                               
                                                                                                                                                                                                                                                               
        this.getView().setBusy(false);                                                                                                                                                                                                                         
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;                                                                                                                                                                                                               
        var url;                                                                                                                                                                                                                                               
        var teklif = true;                                                                                                                                                                                                                                     
        // var pdfKey = oModelSepet.getProperty("/Simkey");                                                                                                                                                                                                    
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;                                                                                                                                                                                                               
        // var teklifNo = oModelSepet.getProperty("/TeklifNo");                                                                                                                                                                                                
                                                                                                                                                                                                                                                               
        var teklifNo = oModelSepet.getProperty("/TeklifNo");                                                                                                                                                                                                   
        if (!teklifNo) {                                                                                                                                                                                                                                       
            console.error("Teklif numarasÄ± oluÅturulamadÄ±.");                                                                                                                                                                                               
            return;                                                                                                                                                                                                                                            
        }                                                                                                                                                                                                                                                      
                                                                                                                                                                                                                                                               
                                                                                                                                                                                                                                                               
                                                                                                                                                                                                                                                               
                                                                                                                                                                                                                                                               
        var env = oModelSepet.getProperty("/Env");                                                                                                                                                                                                             
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;                                                                                                                                                                                                               
        if (env == "DEV") {                                                                                                                                                                                                                                    
          url = "http://kolerpt.koleksiyon.mobilya:8000/sap/opu/odata/sap/ZSD_ODATA_KASA_SRV/SalesDocumentPdfSet(PdfKey='" + teklifNo + "',Teklif='" + teklif + "')/$value";                                                                                   
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;                                                                                                                                                                                                               
        } else if (env == "TEST") {                                                                                                                                                                                                                            
          url = "http://kolerpqa:8000/sap/opu/odata/sap/ZSD_ODATA_KASA_SRV/SalesDocumentPdfSet(PdfKey='" + teklifNo + "',Teklif='" + teklif + "')/$value";                                                                                                     
        } else {                                                                                                                                                                                                                                               
          console.log("Unknown Environment");                                                                                                                                                                                                                  
        };                                                                                                                                                                                                                                                     
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;                                                                                                                                                                                                               
        this.getView().setBusy(true);                                                                                                                                                                                                                          
        setTimeout(function() {                                                                                                                                                                                                                                
        var error = oModelSepet.getProperty("/ErrorOn");                                                                                                                                                                                                       
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;                                                                                                                                                                                                   
if(error !== true) {                                                                                                                                                                                                                                           
  window.open(url);                                                                                                                                                                                                                                            
                                                                                                                                                                                                                                                               
}                                                                                                                                                                                                                                                              
}.bind(this), 2000); // 1 saniye (1000 milisaniye) bekler                                                                                                                                                                                                      
this.getView().setBusy(false);                                                                                                                                                                                                                                 
      },                                                                                                                                                                                                                                                       
&nbsp;&nbsp;&nbsp;&nbsp;                                                                                                                                                                                                                                       
      handleWizardBack: function () {                                                                                                                                                                                                                          
        this.editStepOne();                                                                                                                                                                                                                                    
      },                                                                                                                                                                                                                                                       
      handleWizardShop: function () {                                                                                                                                                                                                                          
        // this._handleNavigationToStep(0);                                                                                                                                                                                                                    
        this.editStepOne();                                                                                                                                                                                                                                    
        setTimeout(() => {                                                                                                                                                                                                                                     
          this.getOwnerComponent().getRouter().navTo("RouteView1", {                                                                                                                                                                                           
            param: "test",                                                                                                                                                                                                                                     
          });                                                                                                                                                                                                                                                  
        }, 500);                                                                                                                                                                                                                                               
      },                                                                                                                                                                                                                                                       
      siparisCreate: function () {                                                                                                                                                                                                                             
        this.getView().setBusy(true);                                                                                                                                                                                                                          
        var oModelSepet = this.getOwnerComponent().getModel("AddBasket");                                                                                                                                                                                      
        // var farkYuvarla=oModelSepet.getProperty("/FarkYuvarla");                                                                                                                                                                                            
        // var totalDisPrice=oModelSepet.getProperty("/TotalDisPrice");                                                                                                                                                                                        
        var sepettekiUrunler = oModelSepet.getProperty("/sepet/sepet");                                                                                                                                                                                        
&nbsp;&nbsp;                                                                                                                                                                                                                                                   
        var genelIskontoYuzde =                                                                                                                                                                                                                                
          oModelSepet.getProperty("/TotalDisPercent") || "0";                                                                                                                                                                                                  
        // var genelIskontoTutar =                                                                                                                                                                                                                             
        //   oModelSepet.getProperty("/TotalDisPrice") || "0";                                                                                                                                                                                                 
        var magazaKod = oModelSepet.getProperty("/Salesman").MagazaKod;                                                                                                                                                                                        
        var satisSorumlusu = oModelSepet.getProperty("/Salesman").PersonelNo;                                                                                                                                                                                  
        // var musteriNo = oModelSepet.getProperty("/customerInfo/No");                                                                                                                                                                                        
        var musteriNo = musteri.No;                                                                                                                                                                                                                            
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;                                                                                                                                                                                                               
        var oDataSepet = [];                                                                                                                                                                                                                                   
        var paymentType = oModelSepet.getProperty("/PaymentType");                                                                                                                                                                                             
        var succesMsg = this.getMessageFromi18n("poSuccessText");                                                                                                                                                                                              
                                                                                                                                                                                                                                                               
        sepettekiUrunler.forEach(function (eleman, index) {                                                                                                                                                                                                    
          var yeniItem = {                                                                                                                                                                                                                                     
            Sipkey: musteri.Sipkey,                                                                                                                                                                                                                            
            Kalem: ((index + 1) * 10).toString(), // ÃrÃ¼n sÄ±ralamasÄ± (index + 1)                                                                                                                                                                           
            MalzemeNo: eleman.Metacode, // SeÃ§ilen matnr                                                                                                                                                                                                      
            // Material: eleman.Matnr, // SeÃ§ilen matnr                                                                                                                                                                                                       
            Miktar: eleman.count.toString(), // SeÃ§ilen Ã¼rÃ¼n miktarÄ±                                                                                                                                                                                       
            // Meins: "", // ÃlÃ§Ã¼ birimi (boÅ)                                                                                                                                                                                                             
            // Price: "0", // SeÃ§ilen Ã¼rÃ¼n fiyatÄ±                                                                                                                                                                                                          
            IskontoYuzde: eleman.discountPercent,                                                                                                                                                                                                              
            IskontoTutar: "0",                                                                                                                                                                                                                                 
            ParaBirimi: "TRY", // Para birimi (TRY)                                                                                                                                                                                                            
            VergiId: "1", // Vergi KimliÄi (1)                                                                                                                                                                                                                
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;                                                                                                                                                                                       
          };                                                                                                                                                                                                                                                   
          oDataSepet.push(yeniItem); // Yeni Ã¶Äeyi yeni dizimize ekle                                                                                                                                                                                        
        });                                                                                                                                                                                                                                                    
        var dataToSend = {                                                                                                                                                                                                                                     
          Sipkey: musteri.Sipkey,                                                                                                                                                                                                                              
          MusteriNo: musteriNo,                                                                                                                                                                                                                                
          GenelIskontoYuzde: genelIskontoYuzde,                                                                                                                                                                                                                
          GenelIskontoTutar: "0",                                                                                                                                                                                                                              
          OdemeTuru: paymentType,                                                                                                                                                                                                                              
          SonToplamTutar: "0",                                                                                                                                                                                                                                 
          Bolge: magazaKod,                                                                                                                                                                                                                                    
          SatisSorumlusu: satisSorumlusu,                                                                                                                                                                                                                      
          Vbeln: "",                                                                                                                                                                                                                                           
          SalesHeaderToItemNav_v2: oDataSepet,                                                                                                                                                                                                                 
          // Simul: false,                                                                                                                                                                                                                                     
          // FarkYuvarla : farkYuvarla,                                                                                                                                                                                                                        
          // MusteriType: "1",                                                                                                                                                                                                                                 
          // PaymentType: paymentType,                                                                                                                                                                                                                         
        };                                                                                                                                                                                                                                                     
        this.getOwnerComponent()                                                                                                                                                                                                                               
          .getModel()                                                                                                                                                                                                                                          
          .create("/SalesCreateHeader_v2Set", dataToSend, {                                                                                                                                                                                                    
            success: function (data) {                                                                                                                                                                                                                         
              this.getView().setBusy(true);                                                                                                                                                                                                                    
              var vbeln = data.Vbeln;                                                                                                                                                                                                                          
              // this.getOwnerComponent().getModel().setProperty("/", {});                                                                                                                                                                                     
              setTimeout(                                                                                                                                                                                                                                      
                function () {                                                                                                                                                                                                                                  
                  MessageBox.success(                                                                                                                                                                                                                          
                    //data.Vbeln + " numaralÄ± sipariÅiniz oluÅturulmuÅtur."                                                                                                                                                                                
                    data.Vbeln + " " + succesMsg                                                                                                                                                                                                               
                  );                                                                                                                                                                                                                                           
                  oModelSepet.setProperty("/vbeln", vbeln);                                                                                                                                                                                                    
                  oModelSepet.setProperty("/buttonEnable", true);                                                                                                                                                                                              
                  oModelSepet.setProperty("/cancelButtonEnable", false);                                                                                                                                                                                       
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;                                                                                                                                                   
                  this.getView().setBusy(false);                                                                                                                                                                                                               
                }.bind(this),                                                                                                                                                                                                                                  
                2500                                                                                                                                                                                                                                           
              );                                                                                                                                                                                                                                               
              // Handle success response                                                                                                                                                                                                                       
            }.bind(this),                                                                                                                                                                                                                                      
            error: function (error) {                                                                                                                                                                                                                          
              var errorObject = error.responseText;                                                                                                                                                                                                            
              errorObject = JSON.parse(error.responseText);                                                                                                                                                                                                    
              errorObject = errorObject.error.innererror.errordetails[0].message;                                                                                                                                                                              
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;                                                                                                                                                                           
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;                                                                                                                                                                                                         
              MessageBox.error("Error occurred: " + errorObject);                                                                                                                                                                                              
              // MessageBox.error("Error occurred: " + error.responseText);                                                                                                                                                                                    
            },                                                                                                                                                                                                                                                 
          });                                                                                                                                                                                                                                                  
      },                                                                                                                                                                                                                                                       
                                                                                                                                                                                                                                                               
      productWeighStateFormatter: function (val) {                                                                                                                                                                                                             
        return isNaN(val) ? "Error" : "None";                                                                                                                                                                                                                  
      },                                                                                                                                                                                                                                                       
                                                                                                                                                                                                                                                               
      discardProgress: function () {                                                                                                                                                                                                                           
        this._wizard.discardProgress(this.byId("ProductTypeStep"));                                                                                                                                                                                            
                                                                                                                                                                                                                                                               
        var clearContent = function (content) {                                                                                                                                                                                                                
          for (var i = 0; i < content.length; i++) {                                                                                                                                                                                                           
            if (content[i].setValue) {                                                                                                                                                                                                                         
              content[i].setValue("");                                                                                                                                                                                                                         
            }                                                                                                                                                                                                                                                  
                                                                                                                                                                                                                                                               
            if (content[i].getContent) {                                                                                                                                                                                                                       
              clearContent(content[i].getContent());                                                                                                                                                                                                           
            }                                                                                                                                                                                                                                                  
          }                                                                                                                                                                                                                                                    
        };                                                                                                                                                                                                                                                     
                                                                                                                                                                                                                                                               
        this.model.setProperty("/productWeightState", "Error");                                                                                                                                                                                                
        this.model.setProperty("/productNameState", "Error");                                                                                                                                                                                                  
        clearContent(this._wizard.getSteps());                                                                                                                                                                                                                 
      },                                                                                                                                                                                                                                                       
                                                                                                                                                                                                                                                               
      //Bu method i18n deki metni text olarak getirmek iÃ§in kullanÄ±lÄ±r.                                                                                                                                                                                     
      getMessageFromi18n: function (sKey) {                                                                                                                                                                                                                    
        // read msg from i18n model                                                                                                                                                                                                                            
        const oBundle = this.getView().getModel("i18n").getResourceBundle();                                                                                                                                                                                   
        var sMessage = oBundle.getText(sKey);                                                                                                                                                                                                                  
        return sMessage;                                                                                                                                                                                                                                       
      },                                                                                                                                                                                                                                                       
    });                                                                                                                                                                                                                                                        
  }                                                                                                                                                                                                                                                            
);                                                                                                                                                                                                                                                             
                                                                                                                                                                                                                                                               